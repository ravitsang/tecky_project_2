<p id="e8f9" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb hc dv"><span class="r hd he hf hg hh hi hj hk hl hm">W</span>eb scraping is inherently useful for many people, in particular those who do not know how to do it. I have written many web scraping scripts for friends. None of them had any programming or computer science related background. This tutorial is for all the Sociologists, Business Analysts, Literature Researcher and all other people sometimes need to automatically collect data from the web.</p><p id="83d1" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">At the end of this tutorial we will have a little script, which if you run it automatically collects an article from medium.com which you could for instance store in a .csv file. You then can process with another software of your choice. The goal is also to teach fundamentals you need in order to do simple website scraping. This guide will not make you a web developer or anything close to that, but I provide some references in the last section, if you are interested in deeper knowledge. For the sake of making this guide understandable for readers without technical background, I decided to oversimplify in some parts as well as I did not use exact terminology.</p><h1 id="df30" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">The Things That I Will Not Explain</h1><p id="7ffb" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">Here are listed the things which you need to know in order to follow this guide. In the scope of this tutorial there in no space to explain them, but I will add some resources so you can learn them beforehand.</p><ol class=""><li id="8775" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb ie if ig">What is Python and how do I use it?</li><li id="9f57" class="go gp ed at gq b gr ih gt ii gv ij gx ik gz il hb ie if ig">How do I install Python packages?</li></ol><h1 id="b37f" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">Basics 1: See Websites From A Different Perspective</h1><p id="9896" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">The first thing we have to understand in order to perform web scraping is the function of the browser. In order to do so, press F12 on the keyboard. If you are using Firefox or Chrome you see the developer tools popping up. One of the things you can see in the developer tools is the plain HTML text which your browser interprets into a website (see Fig. 1). We will need the developer tools later, in order to locate the data that we want to extract in the HTML text of the website. For now, close the developer tools again and lets discuss where the HTML text comes from in first place.</p><figure class="in io ip iq ir is dm dn paragraph-image"><div class="it iu hm iv ak"><div class="dm dn im"><div class="jb r hm jc"><div class="jd r"><div class="iw ix dq t u iy ak cd iz ja"><img class="dq t u iy ak je jf jg" src="https://miro.medium.com/max/60/1*Yv-nhzSOCr4VkCop2kV12A.png?q=20" width="1400" height="297" role="presentation"></div><img class="iw ix dq t u iy ak jh" width="1400" height="297" role="presentation"><noscript><img class="dq t u iy ak" src="https://miro.medium.com/max/2800/1*Yv-nhzSOCr4VkCop2kV12A.png" width="1400" height="297" role="presentation"></noscript></div></div></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Fig 1. Your Browser interprets the HTML text, the Style Sheets (CSS) and the JavaScript code into a beautiful website.</figcaption></figure><p id="726f" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">The browser requests the data that it needs to display a website from a web server via a HTTP request. Such a requests gets then answered from a web server via a HTTP response (See Fig. 2). All this happens in the background while you are clicking through the web. For this guide, we are mostly interested in the body of the response, this is where the HTML text is located.</p><figure class="in io ip iq ir is dm dn paragraph-image"><div class="it iu hm iv ak"><div class="dm dn jn"><div class="jb r hm jc"><div class="jo r"><div class="iw ix dq t u iy ak cd iz ja"><img class="dq t u iy ak je jf jg" src="https://miro.medium.com/max/60/1*4jCsz3axu7pmKnDRcbH9IA.png?q=20" width="1401" height="301" role="presentation"></div><img class="iw ix dq t u iy ak jh" width="1401" height="301" role="presentation"><noscript><img class="dq t u iy ak" src="https://miro.medium.com/max/2802/1*4jCsz3axu7pmKnDRcbH9IA.png" width="1401" height="301" role="presentation"></noscript></div></div></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Fig. 2 Your browser sends a HTTP request for the information it needs to display a website. The server answers with the demanded content.</figcaption></figure><h1 id="a66d" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">Basics 2: HTML</h1><p id="cd82" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">HTML is a language which allows to structure the content of a website. It is part of what we get as a response from the HTTP request. The HTML code consists of tags and content in between the tags. The tags are like markers for content on the website. The browser then knows in which style sheet (CSS) it has to look to into in order to display the content correctly.<br>A tag <em class="jp">&lt;h1&gt;Something&lt;/h1&gt; </em>for instance is interpreted by the browser as a heading of type 1. In the corresponding Style Sheet, it could for instance be noted that h1 heading have to be displayed in blue or a certain font.</p><p id="1c5b" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">We will use such tags later in order to find the information we want to extract. It is important to note that the &lt;h1&gt; tag for instance is in between the body tag. The tags have an hierarchical order, the inner tags are called children and the outer ones are called parents. In our case the &lt;body&gt; tag is the parent of the &lt;h1&gt; and the &lt;p&gt; tag. Later, when extracting a link from a heading we will come back to this concept.</p><figure class="in io ip iq ir is"><div class="jb r hm"><div class="jq r"><iframe src="https://medium.com/media/6eff4f71f0a3de4ab9d4170658082b31" allowfullscreen="" frameborder="0" height="0" width="0" title="" class="dq t u iy ak" scrolling="auto"></iframe></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Code 1: A simple example of an HTML structured document. You can run this HTML in your browser.</figcaption></figure><p id="3d88" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">We learned about interpretation of the HTML into a beautiful website and the request of the HTML text from the web server are two different things, that the browser does for us. Therefor, we can conclude, that we can write our own file containing only HTML text and have the browser interpret it. And this is what we are going to do now.</p><p id="9f0b" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">Create an empty text file on your desktop. Open the file and copy the text from (Code 1) into the file and save it. Right click on the file, click on <em class="jp">Open with </em>with any browser of your choice. If everything worked out, you should now see only the text in between the tags formatted in two different ways.</p><section class="dv dw dx dy dz"><div class="n p"><div class="ac ae af ag ah ea aj ak"><p id="5621" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">After we got the basics we can now start to use Python to replace the browser. First we are going to make the HTTP request with the help of Python and then we are going to use also Python to actually extract the information from the webserverâ€™s response.</p><h1 id="c572" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">Get the request</h1><p id="b15d" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">For this tutorial, our job will be to extract the headings from medium.com and put them into a .csv file. Then select one article and also save the text of the article.</p><p id="2cd5" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">We start to use Python in order to make a HTTP request without using the browser. Therefor, we will use the Python package called<a href="https://2.python-requests.org/en/master/" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow"><em class="jp"> </em>requests</a>. Requests allows us in a very simple manner to formulate an HTTP request and store the response so we can use it later for the extraction of our data.</p><figure class="in io ip iq ir is"><div class="jb r hm"><div class="jq r"><iframe src="https://medium.com/media/65078b92cfbe6f6aaeeaa6bc4149303b" allowfullscreen="" frameborder="0" height="0" width="0" title="" class="dq t u iy ak" scrolling="auto"></iframe></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Code 2: Most simple HTTP GET request in python with the help of requests</figcaption></figure><p id="5e1d" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">In code to we first make a request with the<em class="jp"> get()</em> function and we store the response into the variable <em class="jp">r</em>. Then we print the HTML text of the response which is located in the attribute <em class="jp">text </em>of the response object.</p><h1 id="9ea4" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">Find the data on the website</h1><p id="7715" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">We will work with the non personalized version of the medium.com start page. The easiest way to see how it looks is to open a browser window in <a href="https://support.mozilla.org/en-US/kb/private-browsing-use-firefox-without-history" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">incognito mode</a> and go to medium.com. Then open the developer tools again with F12. And use the inspection tool to find the corresponding HTML part for the headings you want to extract. In our case click with the inspection tool activated onto the main heading. The developer tools will now jump to the part of the HTML text which is responsible for the main heading.</p><figure class="in io ip iq ir is dm dn paragraph-image"><div class="dm dn ke"><div class="jb r hm jc"><div class="kf r"><div class="iw ix dq t u iy ak cd iz ja"><img class="dq t u iy ak je jf jg" src="https://miro.medium.com/max/60/1*dnj_TkWzjwu80ImOOET5Ww.png?q=20" width="23" height="20" role="presentation"></div><img class="iw ix dq t u iy ak jh" width="23" height="20" role="presentation"><noscript><img class="dq t u iy ak" src="https://miro.medium.com/max/46/1*dnj_TkWzjwu80ImOOET5Ww.png" width="23" height="20" role="presentation"></noscript></div></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Inspection tool to find HTML text passage corresponding to the content on the website.</figcaption></figure><figure class="in io ip iq ir is dm dn paragraph-image"><div class="it iu hm iv ak"><div class="dm dn kg"><div class="jb r hm jc"><div class="kh r"><div class="iw ix dq t u iy ak cd iz ja"><img class="dq t u iy ak je jf jg" src="https://miro.medium.com/max/60/1*8RUMQaHQ7S68gZC07zmVug.png?q=20" width="814" height="264" role="presentation"></div><img class="iw ix dq t u iy ak jh" width="814" height="264" role="presentation"><noscript><img class="dq t u iy ak" src="https://miro.medium.com/max/1628/1*8RUMQaHQ7S68gZC07zmVug.png" width="814" height="264" role="presentation"></noscript></div></div></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Fig. 3 Part of the HTML text of medium.com. The blue highlighted text is what you marked with the inspector tool.</figcaption></figure><p id="0382" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">We can identify which HTML tag medium has used for the main heading, by looking into the blue marked part and check for the tag which is written in the smaller and larger signs <em class="jp">&lt;&gt;</em> . As we can see in Fig. 3 medium.com has used an <em class="jp">&lt;h1&gt;</em> tag for the main heading. In the next step we will find all<em class="jp"> &lt;h1&gt;</em> tags used on the website and extract the heading itself.</p><h1 id="703b" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">Extract the data from the website</h1><p id="83a3" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">To extract the heading we have to first find it in the response, that we got from the HTTP request and secondly we have to remove the surrounding HTML structures. The package we are going to use for this job is called <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">beautiful soup</a>.</p><p id="6535" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">Beautiful Soup makes it possible to search through the the different HTML tags, but before we extract certain HTML tags we have to decide which tags we are interested in. The biggest helper here will be the developer tools of your browser, which we have seen before.</p><figure class="in io ip iq ir is"><div class="jb r hm"><div class="jq r"><iframe src="https://medium.com/media/999c6cc10b3732faf2a0f1d34144ea1c" allowfullscreen="" frameborder="0" height="0" width="0" title="" class="dq t u iy ak" scrolling="auto"></iframe></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Code 3 Making a requests, parsing the response, searching for &lt;h1&gt; tags, print the search result, print the text of the first result</figcaption></figure><p id="63b0" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">In order to extract the first heading we will</p><p id="2ce3" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv"><strong class="gq ki">Make a request (1), </strong>which we learned before. The response of the server will be stores in a variable called <em class="jp">r</em>. The HTML text of the response will be <strong class="gq ki">parsed (2) </strong>the into a Beautiful Soup object, we called it <em class="jp">soup</em> here. The parsing basically means that the whole website will be stored in a structure which makes it easy to search through. The BeautifulSoup object additionally gives us some new functions which makes our life easier such as removes the tags from the content. The<strong class="gq ki"> search for all &lt;h1&gt; tags in the response (3)</strong> is performed by calling the function <a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/#searching-the-tree" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">find_all() </a>function on the BeautifulSoup object <em class="jp">soup. </em>You can find out how find_all() works in detail by clicking on the link, but for now it is enough to know that it returns a <a href="https://www.w3schools.com/python/python_lists.asp" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">list </a>of all tags which match the search condition. The first element of the list is our heading. For better understanding, we will <strong class="gq ki">display the whole list (4) </strong>first and then we only print out the first element without the HTML tags by accessing its .text attribute.</p><p id="8975" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">The next step is to open the link behind the text and to extract the content. In Code 4 we can see how this is done. The new line here is line 8, we formulate a new HTTP get request as we have learned before, but this time we will use the link behind the heading in order to get the request. In Fig. 3 we can see that the link is a parent of the heading node, this means we can acces the link by accesing the parent of the heading. In line 8, we acces the first element of the list containing all headings by using <em class="jp">headings[0]</em>, then we acces its parent tag <em class="jp">headings[0].parent</em> and lastly we get what is written in between the <em class="jp">&lt;href&gt;</em> tag. <a href="https://www.w3schools.com/tags/att_a_href.asp" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow"><em class="jp">&lt;href&gt;</em></a> stands for hyper reference and is basically a link as you know it.</p><p id="0375" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">As before, we make a Beautiful Soup object from the response (line 9) and then we are going to find the text of the article which is placed in a couple of &lt;p&gt; tags, but how do we know, that the articles main text is located in &lt;p&gt; tags. We again checked this with the help of the developer tools of the browser. We first click on the link and then mark the text body with the inspection tool.</p><p id="eb28" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">Since the text is written in different paragraphs .find_all() returns a list of all &lt;p&gt; tags. In line 12 we remove the tags from the elements so that only the plain text is which we put back into a list. In line 13 we use the <a href="https://thepythonguru.com/python-builtin-functions/reduce/" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">reduce function,</a> which makes it easy for us to combine the different paragraphs into one single string.</p><figure class="in io ip iq ir is"><div class="jb r hm"><div class="jq r"><iframe src="https://medium.com/media/205828a2cddb9a48f4096271f93f4c9d" allowfullscreen="" frameborder="0" height="0" width="0" title="" class="dq t u iy ak" scrolling="auto"></iframe></div></div><figcaption class="ax fg ji jj jk do dm dn jl jm as cv">Code 4</figcaption></figure><h1 id="911a" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">And what can we do now?</h1><p id="290c" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv">Probably you have some application with scraped data in mind. Either you just want to save it, because the website you are looking at in your work tends to go offline from time to time or you want to to analytics.</p><p id="11bb" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv">One great case is to observe changes in the content of a newspaper over time <a href="https://www.youtube.com/watch?v=-YpwsdRKt8Q" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">(David Kriesel, CCC, 2017)</a>. If we have scraped a couple of articles from, e.g. a news site, we could search for certain key words or <a href="https://www.w3resource.com/python-exercises/string/python-data-type-string-exercise-12.php" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">count their appearance</a>. We could use also different Machine Learning tools to classify text, which I will cover in a different article.</p><h1 id="6845" class="hn ho ed at as hp ef hq eh hr hs ht hu hv hw hx hy">Further reading</h1><p id="8e31" class="go gp ed at gq b gr hz gt ia gv ib gx ic gz id hb dv"><a href="https://www.w3schools.com/tags/ref_httpmethods.asp" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">HTTP</a></p><p id="1a10" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv"><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">Beautiful Soup Documentation</a></p><p id="418a" class="go gp ed at gq b gr gs gt gu gv gw gx gy gz ha hb dv"><a href="https://requests.kennethreitz.org/en/master/" class="da by ka kb kc kd" target="_blank" rel="noopener nofollow">requests Documentation</a></p></div></div></section>