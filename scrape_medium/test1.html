<div>
    <div class="cp u cq cr cs ct"></div>
    <section class="cu cv cw cx cy">
        <div class="n p">
            <div class="ac ae af ag ah cz aj ak">
                <div>
                    <div id="7fb7" class="da db dc bk dd b de df dg dh di dj dk dl dm dn do">
                        <h1 class="dd b de dp dg dq di dr dk ds dm dt dc">Scrapping the content of single-page
                            application (SPA) with headless Chrome and puppeteer</h1>
                    </div>
                    <div class="du">
                        <div class="n dv dw dx dy">
                            <div class="o n">
                                <div><a rel="noopener"
                                        href="/@andrejsabrickis?source=post_page-----d040025f752b----------------------"><img
                                            alt="Andrejs Abrickis" class="r dz ea eb"
                                            src="https://miro.medium.com/fit/c/96/96/2*0kyh9TAgRWsvoE9U4BOFnw.jpeg"
                                            width="48" height="48"></a></div>
                                <div class="ec ak r">
                                    <div class="n">
                                        <div style="flex:1"><span class="bj b bk bl bm bn r dc q">
                                                <div class="ed n o ee"><span class="bj ef eg bl eh ei ej ek el em dc"><a
                                                            class="at au av aw ax ay az ba bb bc en bf bg bh bi"
                                                            rel="noopener"
                                                            href="/@andrejsabrickis?source=post_page-----d040025f752b----------------------">Andrejs
                                                            Abrickis</a></span>
                                                    <div class="eo r ar h"><button
                                                            class="ep dc q by eq er es et bc bh eu ev ew ex ey ez cb bj b bk fa fb bn cc cd ce cf cg bf">Follow</button>
                                                    </div>
                                                </div>
                                            </span></div>
                                    </div><span class="bj b bk bl bm bn r bo bp"><span
                                            class="bj ef eg bl eh ei ej ek el em bo">
                                            <div><a class="at au av aw ax ay az ba bb bc en bf bg bh bi" rel="noopener"
                                                    href="/@andrejsabrickis/scrapping-the-content-of-single-page-application-spa-with-headless-chrome-and-puppeteer-d040025f752b?source=post_page-----d040025f752b----------------------">Jan
                                                    14, 2019</a> <!-- -->·
                                                <!-- -->
                                                <!-- -->5
                                                <!-- --> min read</div>
                                        </span></span>
                                </div>
                            </div>
                            <div class="n fc fd fe ff fg fh fi fj ab">
                                <div class="n o">
                                    <div class="fk r ar"><a
                                            href="//medium.com/p/d040025f752b/share/twitter?source=post_actions_header---------------------------"
                                            class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                                            rel="noopener nofollow"><svg width="29" height="29" class="q">
                                                <path
                                                    d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                                                </path>
                                            </svg></a></div>
                                    <div class="fk r ar"><a
                                            href="//medium.com/p/d040025f752b/share/facebook?source=post_actions_header---------------------------"
                                            class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" target="_blank"
                                            rel="noopener nofollow"><svg width="29" height="29" class="q">
                                                <path
                                                    d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                                                </path>
                                            </svg></a></div>
                                    <div class="fl r ao"><a
                                            href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40andrejsabrickis%2Fscrapping-the-content-of-single-page-application-spa-with-headless-chrome-and-puppeteer-d040025f752b&amp;source=post_actions_header--------------------------bookmark_sidebar-"
                                            class="at au av aw ax ay az ba bb bc bd be bf bg bh bi" rel="noopener"><svg
                                                width="25" height="25" viewbox="0 0 25 25">
                                                <path
                                                    d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                                    fill-rule="evenodd"></path>
                                            </svg></a></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <figure class="fn fo fp fq fr fs cl cm paragraph-image">
                    <div class="ft fu fv fw ak">
                        <div class="cl cm fm">
                            <div class="gc r fv gd">
                                <div class="ge r">
                                    <div class="fx fy cp t u fz ak eh ga gb"><img class="cp t u fz ak gf gg gh"
                                            src="https://miro.medium.com/max/60/0*Nm6YR258nleQ3_PN?q=20" width="6000"
                                            height="4000" role="presentation"></div><img class="fx fy cp t u fz ak gi"
                                        width="6000" height="4000" role="presentation"><noscript><img
                                            class="cp t u fz ak"
                                            src="https://miro.medium.com/max/12000/0*Nm6YR258nleQ3_PN" width="6000"
                                            height="4000" role="presentation"></noscript>
                                </div>
                            </div>
                        </div>
                    </div>
                    <figcaption class="bo eg gj gk gl cn cl cm gm gn bj ef">Photo by <a
                            href="https://unsplash.com/@pankajpatel?utm_source=medium&amp;utm_medium=referral"
                            class="at cg go gp gq gr" target="_blank" rel="noopener nofollow">Pankaj Patel</a> on <a
                            href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral"
                            class="at cg go gp gq gr" target="_blank" rel="noopener nofollow">Unsplash</a></figcaption>
                </figure>
                <h1 id="808f" class="gs gt dc bk bj gu de gv dg gw gx gy gz ha hb hc hd">TL;DR</h1>
                <p id="79a7" class="he hf dc bk hg b hh hi hj hk hl hm hn ho hp hq hr cu">All the code examples from
                    this articles you can find on a GitHub repository <a
                        href="https://github.com/AndrejsAbrickis/axios-cheerio-puppeteer" class="at cg go gp gq gr"
                        target="_blank"
                        rel="noopener nofollow">https://github.com/AndrejsAbrickis/axios-cheerio-puppeteer</a></p>
            </div>
        </div>
    </section>
    <hr class="hs ef ht hu hv gl hw hx hy hz ia">
    <section class="cu cv cw cx cy">
        <div class="n p">
            <div class="ac ae af ag ah cz aj ak">
                <p id="466a" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">Axios and cheerio is a great
                    toolset to fetch and scrape the content of a static web page. But nowadays when many of the websites
                    are built as a single page application and gets rendered dynamically on the client it might not be
                    possible to get the content.</p>
                <p id="a056" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">Just because it’s rendered
                    asynchronously and the content is not backed into the HTML received over the wire, doesn’t mean you
                    cannot access it. You just need a different toolset which allows waiting for the content to appear.
                </p>
                <p id="7d3c" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">Let’s have a quick look on the
                    source HTML of a SPA application and the rendered result.</p>
            </div>
        </div>
        <div class="fs">
            <div class="n p">
                <div class="ig ih ii ij ik il ag im ah in aj ak">
                    <figure class="fn fo fp fq fr fs ip iq paragraph-image">
                        <div class="ft fu fv fw ak">
                            <div class="cl cm io">
                                <div class="gc r fv gd">
                                    <div class="ir r">
                                        <div class="fx fy cp t u fz ak eh ga gb"><img class="cp t u fz ak gf gg gh"
                                                src="https://miro.medium.com/max/60/1*rf9VXhBcni3ub-I_UHO9Ug.png?q=20"
                                                width="2792" height="1538" role="presentation"></div><img
                                            class="fx fy cp t u fz ak gi" width="2792" height="1538"
                                            role="presentation"><noscript><img class="cp t u fz ak"
                                                src="https://miro.medium.com/max/5584/1*rf9VXhBcni3ub-I_UHO9Ug.png"
                                                width="2792" height="1538" role="presentation"></noscript>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <figcaption class="bo eg gj gk gl cn cl cm gm gn bj ef">Screenshot of the beach volleyball
                            standing on <a href="https://bvopen.abrickis.me/#/standings" class="at cg go gp gq gr"
                                target="_blank" rel="noopener nofollow">https://bvopen.abrickis.me/#/standings</a>
                        </figcaption>
                    </figure>
                </div>
            </div>
        </div>
        <div class="n p">
            <div class="ac ae af ag ah cz aj ak">
                <p id="855e" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">In the screenshot above, on
                    the left, you can see a fully rendered standings table. But look at the source the browser
                    downloaded all we can notice is a single <code
                        class="gd is it iu iv b">&lt;div id="#app"&gt;&lt;/div&gt;</code> and a couple of JavaScript
                    files and NO content. So let’s try to get the HTML content of the body.</p>
                <h1 id="b334" class="gs gt dc bk bj gu de gv dg gw gx gy gz ha hb hc hd">Start with axios + cheerio</h1>
                <p id="6320" class="he hf dc bk hg b hh hi hj hk hl hm hn ho hp hq hr cu"><a
                        href="https://github.com/axios/axios" class="at cg go gp gq gr" target="_blank"
                        rel="noopener nofollow">axios</a> is a “Promise based HTTP client for the browser and node.js”.
                    Because it’s an HTTP client we can use it to fetch an HTTP endpoint and receive the response with
                    the body. We can use the HTTP client to fetch not only HTML endpoint but also JSON, images, etc. And
                    hence we are responsible to handle the plain text response.</p>
                <p id="1c30" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">That’s where the cheerio comes
                    to help. <a href="https://github.com/cheeriojs/cheerio" class="at cg go gp gq gr" target="_blank"
                        rel="noopener nofollow">Cheerio</a> is a “Fast, flexible &amp; lean implementation of core
                    jQuery designed specifically for the server”. Basically, it loads and parses the HTML markup as
                    plain text and returns a DOM model we can then access and traverse in jQuery style.</p>
                <p id="7046" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">And because cheerio doesn’t
                    interpret the markup as a browser does. It won’t apply the CSS styles and won’t run the JavaScript
                    and the dynamically rendered content won’t be added to the DOM.</p>
                <p id="0140" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">As an example let’s try to get
                    the content of the body tag using axios and cheerio. In the following gist you can see that we are
                    firing a GET request (L6), then parse the response data into a DOM using cheerio (L7) and finally
                    search for the <code class="gd is it iu iv b">&lt;body&gt;</code> element (L9) to output its HTML
                    content.</p>
                <figure class="fn fo fp fq fr fs">
                    <div class="gc r fv">
                        <div class="iw r"><iframe src="https://medium.com/media/75ee615b6e9d6ed396433a075f0b74a8"
                                allowfullscreen="" frameborder="0" height="0" width="0" title="axios-cheerio.js"
                                class="cp t u fz ak" scrolling="auto"></iframe></div>
                    </div>
                </figure>
                <p id="1b8b" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">When executed this node script
                    we get the web apps placeholder element <code class="gd is it iu iv b">&lt;div id="app"&gt;</code>
                    without the dynamically rendered content.</p>
                <figure class="fn fo fp fq fr fs cl cm paragraph-image">
                    <div class="ft fu fv fw ak">
                        <div class="cl cm ix">
                            <div class="gc r fv gd">
                                <div class="iy r">
                                    <div class="fx fy cp t u fz ak eh ga gb"><img class="cp t u fz ak gf gg gh"
                                            src="https://miro.medium.com/max/60/1*DcGa07rn0f0HPFs0tP_nHg.png?q=20"
                                            width="1024" height="277" role="presentation"></div><img
                                        class="fx fy cp t u fz ak gi" width="1024" height="277"
                                        role="presentation"><noscript><img class="cp t u fz ak"
                                            src="https://miro.medium.com/max/2048/1*DcGa07rn0f0HPFs0tP_nHg.png"
                                            width="1024" height="277" role="presentation"></noscript>
                                </div>
                            </div>
                        </div>
                    </div>
                </figure>
                <p id="06cb" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">Because of what we received
                    over the wire was a plain text and the JavaScripts included in the HTML were not executed and this
                    is where a headless browser comes to rescue.</p>
                <h1 id="3801" class="gs gt dc bk bj gu de gv dg gw gx gy gz ha hb hc hd">Switch to puppeteer and
                    headless Chrome</h1>
                <p id="ebfa" class="he hf dc bk hg b hh hi hj hk hl hm hn ho hp hq hr cu">Let me shortly explain what a
                    <a href="https://developers.google.com/web/updates/2017/04/headless-chrome"
                        class="at cg go gp gq gr" target="_blank" rel="noopener nofollow">headless</a> browser is. In a
                    nutshell headless means it’s a browser without graphical user interface (GUI) which can be
                    controlled programmatically. Mostly it’s useful for E2E testing as it will apply all styles, and run
                    JavaScript to generate the DOM. And because of that, it’s a perfect tool to scrape Single Page
                    Applications.</p>
                <p id="9667" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">And as I mentioned that it’s
                    controlled programmatically. And for that reason, we can use puppeteer to control the browser over
                    the <a href="https://chromedevtools.github.io/devtools-protocol/" class="at cg go gp gq gr"
                        target="_blank" rel="noopener nofollow">DevTools</a> protocol. Let’s get hands-on and see how to
                    get the dynamically rendered HTML.</p>
                <figure class="fn fo fp fq fr fs">
                    <div class="gc r fv">
                        <div class="iw r"><iframe src="https://medium.com/media/ee850ac5668b06ea1200310ac2e4b991"
                                allowfullscreen="" frameborder="0" height="0" width="0" title="puppeteer.js"
                                class="cp t u fz ak" scrolling="auto"></iframe></div>
                    </div>
                </figure>
                <p id="e898" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">In the example above we are
                    using single dependancy pf puppeteer package. First, we initialize a browser instance (L5) and
                    create a new browser page (L6). Afterward, we instruct the browser page to visit an URL (L7) and
                    wait for an element to appear on the page (L8) before to continue. Notice that one can set the
                    timeout in milliseconds how long the browser should wait for the element.</p>
                <p id="c071" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">After we have awaited the
                    element we are using page’s evaluate method to execute a JavaScript within the web page’s context
                    (L10 — L12). This allows us to access the HTML document using vanilla DOM API. From this, we return
                    the HTML of body element and output. And finally, we close the browser which kills the headless
                    Chrome’s process.</p>
                <figure class="fn fo fp fq fr fs cl cm paragraph-image">
                    <div class="ft fu fv fw ak">
                        <div class="cl cm ix">
                            <div class="gc r fv gd">
                                <div class="iy r">
                                    <div class="fx fy cp t u fz ak eh ga gb"><img class="cp t u fz ak gf gg gh"
                                            src="https://miro.medium.com/max/60/1*sIEBwWRmcf3544YxRTiu3w.png?q=20"
                                            width="1024" height="277" role="presentation"></div><img
                                        class="fx fy cp t u fz ak gi" width="1024" height="277"
                                        role="presentation"><noscript><img class="cp t u fz ak"
                                            src="https://miro.medium.com/max/2048/1*sIEBwWRmcf3544YxRTiu3w.png"
                                            width="1024" height="277" role="presentation"></noscript>
                                </div>
                            </div>
                        </div>
                    </div>
                    <figcaption class="bo eg gj gk gl cn cl cm gm gn bj ef">A part of the output</figcaption>
                </figure>
                <p id="1c09" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">And now the result of running
                    this script includes the content of dynamically rendered HTML.</p>
                <h1 id="21ab" class="gs gt dc bk bj gu de gv dg gw gx gy gz ha hb hc hd">Conclusion</h1>
                <p id="7699" class="he hf dc bk hg b hh hi hj hk hl hm hn ho hp hq hr cu">This short post demonstrated
                    two solutions how to scrape a website. One can use a combination of axios and cheerio to get the
                    content of a statically rendered website. And use puppeteer to get a dynamical content which is
                    rendered by a fully-powered and invisible (headless) browser.</p>
                <p id="363e" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">I hope this article will help
                    you to start to utilize the mentioned tools as they can be used not only to scrape the websites but
                    also for testing your web apps (E2E or snapshot tests) or taking screenshots.</p>
            </div>
        </div>
    </section>
    <hr class="hs ef ht hu hv gl hw hx hy hz ia">
    <section class="cu cv cw cx cy">
        <div class="n p">
            <div class="ac ae af ag ah cz aj ak">
                <p id="475a" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">If you found this post useful
                    and would like to read more about random web development topics, just clap for this article or drop
                    a comment here. And as always you can find me on <a href="https://twitter.com/andrejsabrickis"
                        class="at cg go gp gq gr" target="_blank" rel="noopener nofollow">Twitter@andrejsabrickis</a>
                </p>
            </div>
        </div>
    </section>
    <hr class="hs ef ht hu hv gl hw hx hy hz ia">
    <section class="cu cv cw cx cy">
        <div class="n p">
            <div class="ac ae af ag ah cz aj ak">
                <p id="3f88" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">This article, the content, and
                    opinions expressed on Medium are my own. But as I work for one of the<a
                        href="https://www.mintos.com/en/" class="at cg go gp gq gr" target="_blank"
                        rel="noopener nofollow"> leading P2P loans marketplaces Mintos.com</a> I would like to use this
                    last line to promote that we are hiring. Including the Growth Engineering team, I am leading at the
                    moment.</p>
                <p id="46d0" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">You can see all list of the <a
                        href="https://mintos.workable.com" class="at cg go gp gq gr" target="_blank"
                        rel="noopener nofollow">open positions on our Workable board</a>. And feel free to contact me
                    directly if you find something interesting in the list or would like to recommend a person you know.
                </p>
                <p id="52ec" class="he hf dc bk hg b hh ib hj ic hl id hn ie hp if hr cu">Cheers!</p>
            </div>
        </div>
    </section>
</div>