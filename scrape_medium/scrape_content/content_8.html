<figure class="gu gv gw gx gy gz dv dw paragraph-image">
    <div class="dv dw gt">
        <div class="hf r hg hh">
            <div class="hi r">
                <div class="ha hb dz t u hc ak cd hd he"><img class="dz t u hc ak hj hk hl"
                        src="https://miro.medium.com/max/60/0*wZdLE2d3KCFUNSU0?q=20" width="688" height="360"
                        role="presentation"></div><img class="ha hb dz t u hc ak hm" width="688" height="360"
                    role="presentation"><noscript><img class="dz t u hc ak"
                        src="https://miro.medium.com/max/1376/0*wZdLE2d3KCFUNSU0" width="688" height="360"
                        role="presentation"></noscript>
            </div>
        </div>
    </div>
</figure>
<p id="9369" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">It is easy to scrape a simple page, but how do
    we get the next page on Beautiful Soup? What can we do to crawl all the pages until we reach the end?</p>
<p id="a7b4" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Today, we are going to learn how to fetch all
    the items while Web Scraping by reaching to the next pages.</p>
<figure class="gu gv gw gx gy gz">
    <div class="hf r hg">
        <div class="ib r"><iframe
                src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FCbZeugOo5ck%3Ffeature%3Doembed&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DCbZeugOo5ck&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FCbZeugOo5ck%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube"
                allowfullscreen="" frameborder="0" height="480" width="854"
                title="How to get the next page on Beautiful Soup" class="dz t u hc ak" scrolling="auto"></iframe></div>
    </div>
    <figcaption class="ax fp ic id ie dx dv dw if ig as de">Video version of this tutorial</figcaption>
</figure>
<section class="ee ef eg eh ei">
    <div class="n p">
        <div class="ac ae af ag ah ej aj ak">
            <h1 id="1845" class="iq ir em at as cf eo is eq it iu iv iw ix iy iz ja">Getting Started</h1>
            <figure class="gu gv gw gx gy gz dv dw paragraph-image">
                <div class="jb jc hg jd ak">
                    <div class="dv dw gt">
                        <div class="hf r hg hh">
                            <div class="je r">
                                <div class="ha hb dz t u hc ak cd hd he"><img class="dz t u hc ak hj hk hl"
                                        src="https://miro.medium.com/max/60/0*A7iEoM2hTb0YD2f9?q=20" width="688"
                                        height="368" role="presentation"></div><img class="ha hb dz t u hc ak hm"
                                    width="688" height="368" role="presentation"><noscript><img class="dz t u hc ak"
                                        src="https://miro.medium.com/max/1376/0*A7iEoM2hTb0YD2f9" width="688"
                                        height="368" role="presentation"></noscript>
                            </div>
                        </div>
                    </div>
                </div>
            </figure>
            <p id="64d7" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">As the topic of this post is what
                to do to crawl next pages, instead of coding a Beautiful Soup script again, we are going to take the one
                we did previously.</p>
            <p id="9156" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">If you are a beginner, please, do
                the ‘<a
                    href="https://letslearnabout.net/python/beautiful-soup/your-first-web-scraping-script-with-python-beautiful-soup/"
                    class="dj by jf jg jh ji" target="_blank" rel="noopener nofollow">Your first Web Scraping script
                    with Python and Beautiful Soup</a>‘ tutorial first.</p>
            <p id="3c81" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">If you know how to use Beautiful
                Soup, use this starting code in <a href="https://repl.it/@DavidMM1707/Best-CD-Price"
                    class="dj by jf jg jh ji" target="_blank" rel="noopener nofollow">repl.it.</a></p>
            <p id="8691" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">This code fetches us the albums
                from the band the user asks for. All of them? No, just the first 10 ones that are displayed on the first
                page. By now.</p>
            <p id="2ab7" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Open a new repl.it file or
                copy-paste the code in your code editor: Now it’s time to code!</p>
        </div>
    </div>
</section>
<section class="ee ef eg eh ei">
    <div class="n p">
        <div class="ac ae af ag ah ej aj ak">
            <h1 id="8697" class="iq ir em at as cf eo is eq it iu iv iw ix iy iz ja">Refactoring — Getting rid of the
                clutter</h1>
            <figure class="gu gv gw gx gy gz dv dw paragraph-image">
                <div class="jb jc hg jd ak">
                    <div class="dv dw gt">
                        <div class="hf r hg hh">
                            <div class="jj r">
                                <div class="ha hb dz t u hc ak cd hd he"><img class="dz t u hc ak hj hk hl"
                                        src="https://miro.medium.com/max/60/0*8YN3cst3CFrEenKn?q=20" width="688"
                                        height="491" role="presentation"></div><img class="ha hb dz t u hc ak hm"
                                    width="688" height="491" role="presentation"><noscript><img class="dz t u hc ak"
                                        src="https://miro.medium.com/max/1376/0*8YN3cst3CFrEenKn" width="688"
                                        height="491" role="presentation"></noscript>
                            </div>
                        </div>
                    </div>
                </div>
            </figure>
            <p id="56da" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Before adding features, we need to
                clean the clutter by refactoring.</p>
            <p id="27e7" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">We are going to take blocks of
                code and placing them in their own functions, then calling that functions where the code was.</p>
            <p id="5fd5" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Go to the end of the code and take
                the lines where we create the table:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/1a7f8884a7524fd3204f7e06c9b3681b"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="881e" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Cut them and create a function,
                for example, export_table_and_print, and put it after base_url and search_url:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/dca98939515d5a9d66ed54e9f892bb14"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="b424" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">We also added a ‘clean_band_name’
                so the filename where we store the data doesn’t have empty spaces and it is all lowercase, so “ThE
                BeAtLES” search stores a ‘the_beatles_albums.csv’ file.</p>
            <p id="9bc9" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Now, where the old code was, call
                the function, just at the end of the file:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/cef0e519d685f407ab6221e96c47b536"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="4a66" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">The first part is done. Run the
                code and check it is still working.</p>
            <p id="1b38" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Go to the ‘for loop’ at around
                line 45. Take everything that involves in extracting values and adding them to ‘data’ (so, the whole
                code) and replace it with the ‘get_cd_attributes(cd)’.</p>
            <p id="49cd" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">After the last function, create
                that function and paste the code:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/0d6b34b6db12f8ea14367ca7ecbf7bd5"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="9709" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Again, run the code and check it
                is still working. If it is not, compare your code with mine:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/a0a097a91ed89806b3015093d9b35b6a"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="91ef" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">t is working? Cool. Time to get
                ALL the albums!</p>
        </div>
    </div>
</section>
<section class="ee ef eg eh ei">
    <div class="n p">
        <div class="ac ae af ag ah ej aj ak">
            <h1 id="fea7" class="iq ir em at as cf eo is eq it iu iv iw ix iy iz ja">Recursive function — The trick to
                get the next page</h1>
            <figure class="gu gv gw gx gy gz dv dw paragraph-image">
                <div class="dv dw gt">
                    <div class="hf r hg hh">
                        <div class="jl r">
                            <div class="ha hb dz t u hc ak cd hd he"><img class="dz t u hc ak hj hk hl"
                                    src="https://miro.medium.com/max/60/0*T5q-HFDG11EtQfkV?q=20" width="688"
                                    height="656" role="presentation"></div><img class="ha hb dz t u hc ak hm"
                                width="688" height="656" role="presentation"><noscript><img class="dz t u hc ak"
                                    src="https://miro.medium.com/max/1376/0*T5q-HFDG11EtQfkV" width="688" height="656"
                                    role="presentation"></noscript>
                        </div>
                    </div>
                </div>
            </figure>
            <p id="5c1c" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Ok, here’s the trick to get the
                job done: Recursiveness.</p>
            <p id="aedf" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">We are going to create a
                “parse_page’ function. That function will fetch the 10 albums the page will have.</p>
            <p id="5a85" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">After the function it is done, it
                is going to call itself again, with the next page, to parse it, over and over again until we have
                everything.</p>
            <p id="c1bc" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Let me simplify it for you:</p>
            <figure class="gu gv gw gx gy gz dv dw paragraph-image">
                <div class="dv dw gt">
                    <div class="hf r hg hh">
                        <div class="jm r">
                            <div class="ha hb dz t u hc ak cd hd he"><img class="dz t u hc ak hj hk hl"
                                    src="https://miro.medium.com/max/54/0*yLfU_f7NP-AHSfYp?q=20" width="688"
                                    height="774" role="presentation"></div><img class="ha hb dz t u hc ak hm"
                                width="688" height="774" role="presentation"><noscript><img class="dz t u hc ak"
                                    src="https://miro.medium.com/max/1376/0*yLfU_f7NP-AHSfYp" width="688" height="774"
                                    role="presentation"></noscript>
                        </div>
                    </div>
                </div>
            </figure>
            <p id="cbfb" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">I hope it is clear: As we keep
                having a ‘next page’ to parse, we are going to call the same function again and again to fetch all the
                data. When there is no more, we stop. As simple as that.</p>
            <h2 id="0843" class="jn ir em at as cf jo jp jq jr js jt ju jv jw jx jy">Step 1: Create the function</h2>
            <p id="9f96" class="hn ho em at hp b hq jz hs ka hu kb hw kc hy kd ia ee">Grab this code, create another
                function called ‘parse_page(url)’ and call that function at the last line.</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/2befd8d27692e77ed9b82f90bef1077f"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="363d" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">The data object is going to be
                used in different places, take it out and put it after the search_url.</p>
            <p id="b3a8" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">We took the main code and created
                a parse_page function, called it using the ‘search_url’ as parameter and took the ‘data’ object out so
                we can use it globally.</p>
            <p id="d9e4" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">In case you are dizzy, here’s what
                your code should look like now:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/936731ebb59d32448cd67f5a3808bf68"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="0d5d" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Please check this line:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/bb6d054c9530de946d4ddff81be86fce"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="830b" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Now we are not fetching the
                ‘search_url’ (the first one) but the URL that we pass as an argument. This is very important.</p>
            <h2 id="a619" class="jn ir em at as cf jo jp jq jr js jt ju jv jw jx jy">Step 2: Add recursion</h2>
            <p id="ae07" class="hn ho em at hp b hq jz hs ka hu kb hw kc hy kd ia ee">Run the code again. It should
                fetch the 10 first albums as always.</p>
            <p id="aa26" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">That’s why because we haven’t used
                recursion. Let’s write the code that will:</p>
            <ul class="">
                <li id="78ef" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ke kf kg">Get all the pagination
                    links</li>
                <li id="c5ae" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">From all the links,
                    grab the last one</li>
                <li id="df36" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">Check if the last one
                    has a ‘Next’ text</li>
                <li id="4ef2" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">If it has it, get the
                    relative (partial) url</li>
                <li id="bb4a" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">Build the next page url
                    by adding base_url and the relative_url</li>
                <li id="811c" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">Call parse_page again
                    with the next page url</li>
                <li id="f360" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">If doesn’t has the
                    ‘Next’ text, just export the table and print it</li>
            </ul>
            <p id="8b20" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Once we have fetched all the cd
                attributes (that’s it, after the ‘for cd in list_all_cd’ loop), add this line:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/077ae08d97cc0a4be01c405b9cdfac0f"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="a50b" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">We are getting all the ‘list item’
                (or ‘li’) elements inside the ‘unordered list’ with the ‘SearchBreadcrumbs’ class. That’s the pagination
                list.</p>
            <p id="5039" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Then, we go to the last one and
                get the text. Add this after the last code:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/b7e5d7df446d2dabbbceb2f9749c13b0"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="c1b1" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Now we check if ‘next_page_text’
                has ‘Next’ as text. If it does, we take the partial url, we add it to the base to build the
                next_page_url. If it does not, there is no more pages, so we can create the file and print it.</p>
            <p id="3baa" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">That’s all we need. Run the code,
                and now you are getting dozens, if not hundreds of items!</p>
            <h2 id="9610" class="jn ir em at as cf jo jp jq jr js jt ju jv jw jx jy">Step 3: Fixing a small bug</h2>
            <p id="9780" class="hn ho em at hp b hq jz hs ka hu kb hw kc hy kd ia ee">But we can still improve the code.
                Add this 4 lines after parsing the page with Beautiful Soup:</p>
            <figure class="gu gv gw gx gy gz">
                <div class="hf r hg">
                    <div class="jk r"><iframe src="https://medium.com/media/364f169c99c854011323b6744fd3f56f"
                            allowfullscreen="" frameborder="0" height="0" width="0" title="python" class="dz t u hc ak"
                            scrolling="auto"></iframe></div>
                </div>
            </figure>
            <p id="7809" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Sometimes there is a ‘Next’ page
                when the numbers of albums are multiple of 10 (10, 20, 30, 40 and so on) but there is no album there.
                That makes the code to end without creating the file.</p>
            <p id="6e28" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">With this code, it is fixed.</p>
            <p id="3a5e" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Your coding is done!
                Congratulations!</p>
        </div>
    </div>
</section>
<section class="ee ef eg eh ei">
    <div class="n p">
        <div class="ac ae af ag ah ej aj ak">
            <h1 id="77c3" class="iq ir em at as cf eo is eq it iu iv iw ix iy iz ja">Conclusion</h1>
            <p id="add7" class="hn ho em at hp b hq jz hs ka hu kb hw kc hy kd ia ee">Let me summarize what we have
                done:</p>
            <ul class="">
                <li id="0e26" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ke kf kg">We moved blocks of code
                    with the same functionality to functions</li>
                <li id="68ba" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">We put the scraping
                    code inside a function and we call it passing the initial search_url</li>
                <li id="4626" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">Inside the function, we
                    scrap the code</li>
                <li id="506d" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">After it is done, we
                    check for the next URL</li>
                <li id="626f" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">If there is a ‘next
                    url‘, we call the function with the next page URL</li>
                <li id="73c4" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">If not, we end the
                    scraping and create the .csv file</li>
            </ul>
            <p id="055c" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Now it seems simpler, right?</p>
            <p id="5c0f" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">I want to keep doing tutorials
                like this one, but I want to ask you what do you want to see:</p>
            <ul class="">
                <li id="9ff7" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ke kf kg">Do you want more Web
                    Scraping with Beautiful Soup or Scrapy?</li>
                <li id="0402" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">Do you want me to teach
                    how to make a Flask web app or a Django one?</li>
                <li id="21b3" class="hn ho em at hp b hq kh hs ki hu kj hw kk hy kl ia ke kf kg">Or do you want to learn
                    more Front-End things like Vue.js?</li>
            </ul>
            <p id="43c0" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Please, leave me a comment with
                what do you want to see in future posts.</p>
            <p id="eda5" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">And if this tutorial has been
                useful to you, share it with your friends, on Twitter, Facebook or where you can help others.</p>
        </div>
    </div>
</section>
<section class="ee ef eg eh ei">
    <div class="n p">
        <div class="ac ae af ag ah ej aj ak">
            <p id="638f" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee"><a
                    href="https://repl.it/@DavidMM1707/Best-CD-Price-Next-Page" class="dj by jf jg jh ji"
                    target="_blank" rel="noopener nofollow">Final code on Repl.it</a></p>
            <p id="847a" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee"><a
                    href="https://twitter.com/DavidMM1707" class="dj by jf jg jh ji" target="_blank"
                    rel="noopener nofollow">Reach to me on Twitter</a></p>
            <p id="a2bf" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee"><a
                    href="https://www.youtube.com/channel/UC9OLm6YFRzr4yjlw4xNWYvg?sub_confirmation=1"
                    class="dj by jf jg jh ji" target="_blank" rel="noopener nofollow">My Youtube tutorial videos</a></p>
            <p id="3f5e" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee"><a
                    href="https://github.com/david1707" class="dj by jf jg jh ji" target="_blank"
                    rel="noopener nofollow">My Github</a></p>
            <p id="7d7f" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Contact me: DavidMM1707@gmail.com
            </p>
            <p id="fdd7" class="hn ho em at hp b hq hr hs ht hu hv hw hx hy hz ia ee">Keep reading <a
                    href="https://letslearnabout.net/category/tutorial/" class="dj by jf jg jh ji" target="_blank"
                    rel="noopener nofollow">more tutorials</a></p>
        </div>
    </div>
</section>