<div class="fu fv fw fx fy fz ag ga ah gb aj ak"><figure class="gd ge gf gg gh ft gi gj paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm gc"><div class="gs r dz gt"><div class="gu r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*R7Fvc3uJkHaaWvvgJVlx-Q.png?q=20" width="1920" height="1080" role="presentation"></div><img class="gn go cp t u gp ak gy" width="1920" height="1080" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/3840/1*R7Fvc3uJkHaaWvvgJVlx-Q.png" width="1920" height="1080" role="presentation"></noscript></div></div></div></div></figure></div><p id="3155" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">When we develop web application sometimes <strong class="hb hn">we need to test the UX</strong>. Most of the time we do it manually. For example, after a form submission what happen, which a person check it manually. In future, if another coder wrongly modified the form code it may creates a bug which may be skipped by manual tester.</p><p id="0997" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Sometimes <strong class="hb hn">we want to scrap some webpage’s information</strong> but which is fully loaded by JavaScript framework. In normal scraping techniques it’s not possible to scrap data as the data is loaded lazily.</p><p id="729b" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">We <strong class="hb hn">can solve both webpage testing and dynamic web page scraping</strong> by running <strong class="hb hn">JavaScript code using </strong><a href="https://www.seleniumhq.org/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow"><strong class="hb hn">Selenium</strong></a><strong class="hb hn"> library. </strong>Which is called automate the web browser.</p><p id="7f32" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">In this post I will discuss about:</p><ol class=""><li id="15f2" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm hs ht hu">Installing <a href="http://selenium-python.readthedocs.io/getting-started.html" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">Selenium library in Mac and Windows</a></li><li id="e6be" class="gz ha dc bk hb b hc hv he hw hg hx hi hy hk hz hm hs ht hu">Install Headless <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">Google Chrome driver</a> in Mac and Windows</li><li id="b467" class="gz ha dc bk hb b hc hv he hw hg hx hi hy hk hz hm hs ht hu">A Python script to run <a href="https://github.com/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">github.com</a> site in headless browser</li><li id="54e9" class="gz ha dc bk hb b hc hv he hw hg hx hi hy hk hz hm hs ht hu">Using Python selenium library to run JavaScript code</li><li id="448f" class="gz ha dc bk hb b hc hv he hw hg hx hi hy hk hz hm hs ht hu">Scraping <a href="http://github.com/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow"><strong class="hb hn">github.com</strong></a><strong class="hb hn"> webpage data</strong> after it loaded</li><li id="d8f3" class="gz ha dc bk hb b hc hv he hw hg hx hi hy hk hz hm hs ht hu"><strong class="hb hn">Filling</strong> the <a href="http://github.com/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow"><strong class="hb hn">github.com</strong></a><strong class="hb hn"> search form</strong> and <strong class="hb hn">submit by code</strong></li><li id="3080" class="gz ha dc bk hb b hc hv he hw hg hx hi hy hk hz hm hs ht hu">Finally <strong class="hb hn">taking the invisible browsers screenshot programmatically</strong></li></ol><p id="1f59" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">We have a Bangla narrated video tutorial for this solution:</p><figure class="gd ge gf gg gh ft"><div class="gs r dz"><div class="gu r"><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F9ff6at9ONWA&amp;src_secure=1&amp;url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D9ff6at9ONWA&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F9ff6at9ONWA%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="720" width="1280" title="Execute JavaScript in Python with Selenium Webdriver | Web Automation Bangla Tutorial ## 10" class="cp t u gp ak" scrolling="auto"></iframe></div></div></figure><h1 id="9d4d" class="ia ib dc bk bj ic de id dg ie if ig ih ii ij ik il">Setup</h1><p id="8637" class="gz ha dc bk hb b hc im he in hg io hi ip hk iq hm cu">We need <a href="https://thinkdiff.net/python/python-official-pipenv-packaging-tool-for-virtualenv-and-pip-in-mac-and-windows/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">pipenv</a> to install Selenium library for this project. <strong class="hb hn">If you don’t know how to install Pipenv then please </strong><a href="https://thinkdiff.net/python/python-official-pipenv-packaging-tool-for-virtualenv-and-pip-in-mac-and-windows/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow"><strong class="hb hn">check my other tutorial</strong></a><strong class="hb hn">.</strong></p><h1 id="7979" class="ia ib dc bk bj ic de id dg ie if ig ih ii ij ik il">1. Installing Selenium library in Mac and Windows</h1><p id="9ccf" class="gz ha dc bk hb b hc im he in hg io hi ip hk iq hm cu">First in terminal go to a directory. In my case I am in this directory:</p><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm ir"><div class="gs r dz gt"><div class="is r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*-Rt2mw8xG2brxylbi92J4A.png?q=20" width="926" height="304" role="presentation"></div><img class="gn go cp t u gp ak gy" width="926" height="304" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/1852/1*-Rt2mw8xG2brxylbi92J4A.png" width="926" height="304" role="presentation"></noscript></div></div></div></div></figure><p id="2a14" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu"><code class="gt it iu iv iw b">/Users/mahmud/Desktop/demo/sel1</code></p><p id="c916" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Now open the Terminal in Mac or PowerShell in Windows and run the following commands:</p><p id="0d30" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu"><code class="gt it iu iv iw b">pipenv install selenium</code></p><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm ix"><div class="gs r dz gt"><div class="iy r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*FTvrCwBNDs54-FfpDa_A1A.png?q=20" width="1592" height="330" role="presentation"></div><img class="gn go cp t u gp ak gy" width="1592" height="330" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/3184/1*FTvrCwBNDs54-FfpDa_A1A.png" width="1592" height="330" role="presentation"></noscript></div></div></div></div></figure><p id="aec9" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">It will create 2 files, Pipfile and Pipfile.lock</p><p id="da40" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Now run the following command to activate sel1 project’s virtualenv.</p><pre class="gd ge gf gg gh iz ja jb"><span id="f923" class="jc ib dc bk iw b en jd je r jf">pipenv shell</span></pre><h1 id="5b78" class="ia ib dc bk bj ic de id dg ie if ig ih ii ij ik il">2. Install Headless Google Chrome driver</h1><p id="2766" class="gz ha dc bk hb b hc im he in hg io hi ip hk iq hm cu">To automate web browser, which is done in invisible way, we need to install Google Chrome driver. Please visit <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">the following website</a> and download the latest released driver for your mac or windows or linux operating system.</p><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm jg"><div class="gs r dz gt"><div class="jh r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*CAXyYYp-sqJlf46c_i0j8g.png?q=20" width="930" height="530" role="presentation"></div><img class="gn go cp t u gp ak gy" width="930" height="530" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/1860/1*CAXyYYp-sqJlf46c_i0j8g.png" width="930" height="530" role="presentation"></noscript></div></div></div></div></figure><p id="41d9" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Now <strong class="hb hn">unzip the downloaded file</strong>, and c<strong class="hb hn">opy the chromedriver.exe file</strong> in our project directory <strong class="hb hn">sel1</strong>.</p><h1 id="aaec" class="ia ib dc bk bj ic de id dg ie if ig ih ii ij ik il">3. Run the python script</h1><p id="f5a5" class="gz ha dc bk hb b hc im he in hg io hi ip hk iq hm cu">Now in the sel1 directory, create a python script named <strong class="hb hn">chapter9.py</strong> and paste the following codes. <a href="https://git.io/vpCuV" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">Github Source</a></p><pre class="gd ge gf gg gh iz ja jb"><span id="e1b6" class="jc ib dc bk iw b en jd je r jf"><em class="ji"># author: Mahmud Ahsan</em><br><em class="ji"># github: https://github.com/mahmudahsan</em><br><em class="ji"># blog: http://thinkdiff.net</em><br><em class="ji"># Web: http://pythonbangla.com</em><br><em class="ji"># youtube: https://www.youtube.com/c/banglaprogramming</em><br><em class="ji"># License: MIT License</em><br><em class="ji"># https://github.com/mahmudahsan/thinkdiff/blob/master/LICENSE </em><br><br><em class="ji"># --------------------------</em><br><em class="ji">#      Execute JavaScript</em><br><em class="ji"># --------------------------</em><br><br>from selenium import webdriver<br>from selenium.webdriver.chrome.options import Options<br>from selenium.webdriver.common.keys import Keys<br>import os<br><br>def main():<br>    chrome_options = Options()<br>    chrome_options.add_argument("--headless")<br>    chrome_options.add_argument("--window-size=1024x1400")<br><br>    <em class="ji"># download Chrome Webdriver  </em><br>    <em class="ji"># https://sites.google.com/a/chromium.org/chromedriver/download</em><br>    <em class="ji"># put driver executable file in the script directory</em><br>    chrome_driver = os.path.join(os.getcwd(), "chromedriver")<br><br>    driver = webdriver.Chrome(chrome_options=chrome_options, executable_path=chrome_driver)<br><br>    driver.get("https://github.com")<br>    assert "GitHub".lower() in driver.title.lower()<br>    <br>    <em class="ji"># scrap info</em><br>    h1_elem = driver.find_element_by_tag_name("h1")<br>    print(h1_elem.text)<br><br>    <em class="ji"># fill and submit form</em><br>    elem = driver.find_element_by_name("q")<br>    elem.clear()<br>    elem.send_keys("python")<br>    elem.send_keys(Keys.RETURN)<br><br>    <em class="ji"># screenshot capture</em><br>    driver.get_screenshot_as_file("python-github.png")<br>    driver.close()<br><br>if __name__ == '__main__' : main()</span></pre><h1 id="5994" class="ia ib dc bk bj ic de id dg ie if ig ih ii ij ik il">4. Run the program</h1><p id="835a" class="gz ha dc bk hb b hc im he in hg io hi ip hk iq hm cu">In macOS terminal run the following command:</p><pre class="gd ge gf gg gh iz ja jb"><span id="1cef" class="jc ib dc bk iw b en jd je r jf">python3 chapter9.py</span></pre><p id="ffef" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">In windows 10 power shell run the following command. Just use Python instead of Python3</p><pre class="gd ge gf gg gh iz ja jb"><span id="5ace" class="jc ib dc bk iw b en jd je r jf">python chapter9.py</span></pre><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm jj"><div class="gs r dz gt"><div class="jk r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*nRz-blrMVBWgWBfIM2P08w.png?q=20" width="1250" height="288" role="presentation"></div><img class="gn go cp t u gp ak gy" width="1250" height="288" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/2500/1*nRz-blrMVBWgWBfIM2P08w.png" width="1250" height="288" role="presentation"></noscript></div></div></div></div></figure><p id="9f84" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">After successfully run the program, you will get a png file named python-github.png.</p><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm jl"><div class="gs r dz gt"><div class="jm r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*2_GofjsRy38xfD4SUYQnAw.png?q=20" width="1991" height="988" role="presentation"></div><img class="gn go cp t u gp ak gy" width="1991" height="988" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/3982/1*2_GofjsRy38xfD4SUYQnAw.png" width="1991" height="988" role="presentation"></noscript></div></div></div></div></figure><h1 id="a03a" class="ia ib dc bk bj ic de id dg ie if ig ih ii ij ik il">5. Python script analysis</h1><p id="da8e" class="gz ha dc bk hb b hc im he in hg io hi ip hk iq hm cu">It is a very simple script. At first we import python selenium libraries in our script. Then we create a webdriver object based on some options we provided also we mentioned the google chrome browser driver location via <strong class="hb hn">chrome_driver</strong> object.</p><p id="8872" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Then by <strong class="hb hn">driver.get()</strong> method we load <a href="http://github.com/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">github.com</a> website.</p><p id="6403" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">In the <strong class="hb hn">#scrap info section </strong>we <strong class="hb hn">scrap HTML h1 tag data</strong> and <strong class="hb hn">print it in the console</strong>. <strong class="hb hn">This is how we scrap</strong> via selenium and headless web driver.</p><p id="b14f" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">In the #scrap info section we scrap HTML h1 tag data and print it in the console. This is how we scrap via selenium and headless web driver.</p><pre class="gd ge gf gg gh iz ja jb"><span id="6006" class="jc ib dc bk iw b en jd je r jf"><em class="ji"># scrap info</em><br> h1_elem = driver.find_element_by_tag_name("h1")<br> print(h1_elem.text)</span></pre><p id="16d6" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">We see “Built for developers” is printed in the terminal.</p><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm jj"><div class="gs r dz gt"><div class="jk r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*nRz-blrMVBWgWBfIM2P08w.png?q=20" width="1250" height="288" role="presentation"></div><img class="gn go cp t u gp ak gy" width="1250" height="288" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/2500/1*nRz-blrMVBWgWBfIM2P08w.png" width="1250" height="288" role="presentation"></noscript></div></div></div></div></figure><p id="ae0d" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Finally we fill and submit the form by code. To select the search form in the webpage by javascript, we use Google Chrome Browser’s Inspect code option to check the form element name.</p><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm jn"><div class="gs r dz gt"><div class="jo r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*AOHcPNi_-CQSH8fVV_PUEg.png?q=20" width="2092" height="1472" role="presentation"></div><img class="gn go cp t u gp ak gy" width="2092" height="1472" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/4184/1*AOHcPNi_-CQSH8fVV_PUEg.png" width="2092" height="1472" role="presentation"></noscript></div></div></div></div></figure><p id="4b13" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">This is the code that automates search and submit the form:</p><pre class="gd ge gf gg gh iz ja jb"><span id="0953" class="jc ib dc bk iw b en jd je r jf"><em class="ji"># fill and submit form</em><br>elem = driver.find_element_by_name("q")<br>elem.clear()<br>elem.send_keys("python")<br>elem.send_keys(Keys.RETURN)</span></pre><p id="fd64" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">To take screenshot of the final page we write the following code:</p><pre class="gd ge gf gg gh iz ja jb"><span id="aed1" class="jc ib dc bk iw b en jd je r jf"># screenshot capture<br>  driver.get_screenshot_as_file("python-github.png")<br>  driver.close()</span></pre><figure class="gd ge gf gg gh ft cl cm paragraph-image"><div class="gk gl dz gm ak"><div class="cl cm jp"><div class="gs r dz gt"><div class="jq r"><div class="gn go cp t u gp ak eo gq gr"><img class="cp t u gp ak gv gw gx" src="https://miro.medium.com/max/60/1*0ZVoK4jdithY6obzXU4c8A.png?q=20" width="1298" height="228" role="presentation"></div><img class="gn go cp t u gp ak gy" width="1298" height="228" role="presentation"><noscript><img class="cp t u gp ak" src="https://miro.medium.com/max/2596/1*0ZVoK4jdithY6obzXU4c8A.png" width="1298" height="228" role="presentation"></noscript></div></div></div></div></figure><p id="7449" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">This is one of the way we can use selenium library in Python to execute JavaScript to test webpage or scrap dynamic or static website information.</p><p id="08d4" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu"><strong class="hb hn">Reference:</strong></p><ol class=""><li id="25ad" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm hs ht hu">Selenium: <a href="https://www.seleniumhq.org/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">https://www.seleniumhq.org</a></li></ol><p id="8be7" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">2. Selenium Python Docs: <a href="http://selenium-python.readthedocs.io/getting-started.html" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">http://selenium-python.readthedocs.io/getting-started.html</a></p><p id="a8bd" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">3. Google Chrome Web Driver: <a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow">https://sites.google.com/a/chromium.org/chromedriver/downloads</a></p><p id="bf42" class="gz ha dc bk hb b hc hd he hf hg hh hi hj hk hl hm cu">Source:<a href="http://thinkdiff.net/python/how-to-run-javascript-in-python-web-scraping-testing/" class="at cg ho hp hq hr" target="_blank" rel="noopener nofollow"> Thinkdiff.net</a></p>