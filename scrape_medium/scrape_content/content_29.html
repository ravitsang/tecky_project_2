<div><div id="a89a" class="fk fl fm at fn b fo fp fq fr fs ft fu fv fw fx fy"><h1 class="fn b fo fz fq ga fs gb fu gc fw gd fm">A Serverless Pipeline to retrieve, validate, and immerse the data to Azure SQL Server from Twitter.</h1></div><div class="ge"><div class="n gf gg gh gi"><div class="o n"><div><a href="/@ksw352?source=post_page-----1a5757b39bc8----------------------" rel="noopener"><div class="em gj gk"><div class="gl n gm o p ds gn go gp gq gr dw"><svg width="57" height="57" viewbox="0 0 57 57"><path fill-rule="evenodd" clip-rule="evenodd" d="M28.5 1.2A27.45 27.45 0 0 0 4.06 15.82L3 15.27A28.65 28.65 0 0 1 28.5 0C39.64 0 49.29 6.2 54 15.27l-1.06.55A27.45 27.45 0 0 0 28.5 1.2zM4.06 41.18A27.45 27.45 0 0 0 28.5 55.8a27.45 27.45 0 0 0 24.44-14.62l1.06.55A28.65 28.65 0 0 1 28.5 57 28.65 28.65 0 0 1 3 41.73l1.06-.55z"></path></svg></div><img alt="karanpreet singh wadhwa" class="r gs gk gj" src="https://miro.medium.com/fit/c/96/96/0*_cSkznHqiWVHYgJN.jpg" width="48" height="48"></div></a></div><div class="gt ak r"><div class="n"><div style="flex:1"><span class="as b at au av aw r fm q"><div class="gu n o gv"><span class="as cx fa au cd gw gx gy gz ha fm"><a href="/@ksw352?source=post_page-----1a5757b39bc8----------------------" class="dc dd bb bc bd be bf bg bh bi hb bl bm hc hd" rel="noopener">karanpreet singh wadhwa</a></span><div class="he r ap h"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-serverless-pipeline-to-retrieve-validate-and-immerse-the-data-to-azure-sql-server-from-twitter-1a5757b39bc8&amp;source=-4ad651423231-------------------------follow_byline-" class="hf fm q bq hg hh hi hj bi hc hk hl hm hn ho hp bt as b at hq cy aw bu bv bw bx by bl" rel="noopener">Follow</a></div></div></span></div></div><span class="as b at au av aw r ax ay"><span class="as cx fa au cd gw gx gy gz ha ax"><div><a class="dc dd bb bc bd be bf bg bh bi hb bl bm hc hd" rel="noopener" href="/a-serverless-pipeline-to-retrieve-validate-and-immerse-the-data-to-azure-sql-server-from-twitter-1a5757b39bc8?source=post_page-----1a5757b39bc8----------------------">Nov 2, 2019</a> <!-- -->·<!-- --> <!-- -->3<!-- --> min read<span style="padding-left:4px"><svg class="star-15px_svg__svgIcon-use" width="15" height="15" viewbox="0 0 15 15" style="margin-top:-2px"><path d="M7.44 2.32c.03-.1.09-.1.12 0l1.2 3.53a.29.29 0 0 0 .26.2h3.88c.11 0 .13.04.04.1L9.8 8.33a.27.27 0 0 0-.1.29l1.2 3.53c.03.1-.01.13-.1.07l-3.14-2.18a.3.3 0 0 0-.32 0L4.2 12.22c-.1.06-.14.03-.1-.07l1.2-3.53a.27.27 0 0 0-.1-.3L2.06 6.16c-.1-.06-.07-.12.03-.12h3.89a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div></span></span></div></div><div class="n hr hs ht hu hv hw hx hy ab"><div class="n o"><div class="hz r ap"><a href="//medium.com/p/1a5757b39bc8/share/twitter?source=post_actions_header---------------------------" class="dc dd bb bc bd be bf bg bh bi ia ib bl bm hc hd" target="_blank" rel="noopener nofollow"><svg width="29" height="29" class="q"><path d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></a></div><div class="hz r ap"><a href="//medium.com/p/1a5757b39bc8/share/facebook?source=post_actions_header---------------------------" class="dc dd bb bc bd be bf bg bh bi ia ib bl bm hc hd" target="_blank" rel="noopener nofollow"><svg width="29" height="29" class="q"><path d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"></path></svg></a></div><div class="ic r ao"><a href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fa-serverless-pipeline-to-retrieve-validate-and-immerse-the-data-to-azure-sql-server-from-twitter-1a5757b39bc8&amp;source=post_actions_header--------------------------bookmark_sidebar-" class="dc dd bb bc bd be bf bg bh bi ia ib bl bm hc hd" rel="noopener"><svg width="25" height="25" viewbox="0 0 25 25"><path d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z" fill-rule="evenodd"></path></svg></a></div></div></div></div></div></div><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><blockquote class="im"><div id="0673" class="in io ip at fn b iq ir is it iu iv iw"><p class="fn b ix iy ax">Learning how to do data science is like learning to ski. You have to do it.</p></div></blockquote></div></div></section><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><h2 id="6268" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Project Statement:</h2><p id="3cd7" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw dx">Given a twitter ID, get a minimum of 100 followers (Modified this to keep in Azure function 5–10 min timeout period) and for each follower gather up to 200 tweets.<br>Store the tuple (twitterID,followerID,tweetID,tweet) into a table managed in Azure SQL Service.<br>1) You will have to create and set up a free Azure account.<br>2) Create a database and a table in that Azure account.<br>3) Create a twitter account with API <br>4). given twitter ID, gather follower ids of that twitter ID<br>4.1) for each of the follower ID gather up to 200 original tweets <br> — — exclude retweets, messages <br>5) Store that into the Azure table<br>6) Write a client to query that Azure table.<br>6.1) List all tweets for a given twitter ID<br>6.2) List follower ID for a given twitter ID</p><h2 id="07d5" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Technology Used:</h2><ol class=""><li id="51f4" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw ka kb kc">Python</li><li id="b5f0" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw ka kb kc">Twython library to extract tweeter data</li><li id="f4dc" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw ka kb kc">Azure Function</li><li id="cd8a" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw ka kb kc">Azure SQL server</li></ol><h2 id="83e7" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Things I learned:</h2><ol class=""><li id="88a5" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw ka kb kc">Azure SQL Server Usage from localhost as well as Azure Server-less and Azure Databricks.</li><li id="c770" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw ka kb kc">Azure Function.</li><li id="2ed6" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw ka kb kc">Learned <a href="https://twython.readthedocs.io/en/latest/" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">twython</a> library usage to extract tweets.</li></ol></div></div></section><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><h2 id="26d0" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Brief Summary of steps followed while doing the <a href="https://github.com/ksw25/Extract-Data-From-Tweeter-And-Save-In-Azure-SQL-Using-Azure-ServerLess" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">project</a>:</h2><ol class=""><li id="6172" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw ka kb kc">Created a <a href="https://developer.twitter.com/en/apply-for-access.html" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">Tweeter Developer Account</a>.</li><li id="053e" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw ka kb kc">Wrote a python script to extract the Follower’s ID for a given User ID.</li></ol><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/202da6dc67e388b975b57f9af6f38504" allowfullscreen="" frameborder="0" height="0" width="0" title="script to extract the Follower's ID for a given User ID." class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx">Code for getting followers ID for a Given User ID</figcaption></figure><p id="7899" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">3. Wrote a python script the take Followers ID extracted in the previous step and retrieve at max 200 tweets for each.</p><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/20f9ad55ca70ae1ba72765a5647229c1" allowfullscreen="" frameborder="0" height="0" width="0" title="Script the take Followers ID extracted in the previous step and retrieve at max 200 tweets for each." class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx">Code for getting followers Tweet</figcaption></figure><p id="2f40" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">4. Created an Azure SQL database.</p><p id="9d41" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">5. Wrote a python script to take the result from step 3 and save it to the Azure SQL server.</p><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/97d5077256e128ac31cc4cf7b8cdd4e6" allowfullscreen="" frameborder="0" height="0" width="0" title="Saving extracted data to Azure SQl server" class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx">Code to Save extracted data to Azure SQL server</figcaption></figure><p id="96ff" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">6. I created an Azure function project and func. Modify script to work on Azure Function.</p><p id="14ed" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">7. Create 2 More Client functions for the following purpose.</p><ul class=""><li id="1452" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw kt kb kc">List all tweets for a given twitter ID</li></ul><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/74b1339c252e76f15ce81ab8a63d9a4a" allowfullscreen="" frameborder="0" height="0" width="0" title="List all tweets for a given twitter ID" class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx">List all tweets for a given twitter ID</figcaption></figure><ul class=""><li id="0b7a" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw kt kb kc">List follower ID for a given twitter ID</li></ul><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/e9beebff88282a04a5abfe409528d09d" allowfullscreen="" frameborder="0" height="0" width="0" title="List follower ID for a given twitter ID" class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx">List follower ID for a given twitter ID</figcaption></figure></div></div></section><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><h2 id="1030" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Links for each Azure Functions:</h2><p id="5a98" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw dx">(These are templates for you guys to look over. I have turned off the activation of these links so that they won’t work. <strong class="jp ku">I am not rich, sadly 😢 😭 .</strong>)</p><p id="cde6" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Task 1: To save Followers’ ID and their Respective Tweets. (Placed in TweetWork in MyFunctionProj Directory)</p><ul class=""><li id="e614" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw kt kb kc"><a href="https://demo.azurewebsites.net/api/Tweetwork" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://demo.azurewebsites.net/api/Tweetwork</a></li><li id="fa1e" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw kt kb kc">for example <a href="https://demo.azurewebsites.net/api/Tweetwork?name=25073877" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://demo.azurewebsites.net/api/Tweetwork?name=25073877</a></li></ul><p id="9a4b" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Task 2: List all tweets for a given twitter ID. (Placed in Client1BigData in MyFunctionProj Directory)</p><ul class=""><li id="40f0" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw kt kb kc"><a href="https://demo.azurewebsites.net/api/Client1BigData?code=NyhLElXnjBz08QButk1jkbaYLVdJE9vAKnX09CN1vrg==" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://demo.azurewebsites.net/api/Client1BigData?code=NyhLElXnjBz08QButk1jkbaYLVdJE9vAKnX09CN1vrg==</a></li><li id="8f31" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw kt kb kc">for example <a href="https://demo.azurewebsites.net/api/Client1BigData?code=NyhLElXnjBz08QButk1jkbaYLVdJE9vAK9CN1vrg==&amp;name=979178022367461376" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://demo.azurewebsites.net/api/Client1BigData?code=NyhLElXnjBz08QButk1jkbaYLVdJE9vAK9CN1vrg==&amp;name=979178022367461376</a></li></ul><p id="0eb9" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Task 3: List follower ID for a given twitter ID. (Placed in Client2BigData in MyFunctionProj Directory)</p><ul class=""><li id="d451" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw kt kb kc"><a href="https://demo.azurewebsites.net/api/Client1BigData?code=NyhLElXnjBz08QButk1jkbaYLVdJE9vAK9CN1vrg==" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://demo.azurewebsites.net/api/Client1BigData?code=NyhLElXnjBz08QButk1jkbaYLVdJE9vAK9CN1vrg==</a></li><li id="48f8" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw kt kb kc">for example <a href="https://demo.azurewebsites.net/api/client2bigdata?code=2MO/r/Wvk5JQFsbQ1KKkA0hdWF1OCfdeyZjpENpoNkVGIS57Waw==&amp;name=25073877" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://demo.azurewebsites.net/api/client2bigdata?code=2MO/r/Wvk5JQFsbQ1KKkA0hdWF1OCfdeyZjpENpoNkVGIS57Waw==&amp;name=25073877</a></li></ul><h2 id="59f7" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Challenges Faced:</h2><ul class=""><li id="42a5" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw kt kb kc">If you are using Mac for debugging Azure function in Visual Studio, it is very hard as sometimes Visual studio does not create an exact extension/helper file to make debugging work. Personally, For me, It didn’t work at all. I had to push function online every time I wanted to check it. <strong class="jp ku">But I found the solution for it now. </strong>There are three files in .vscode then are sometimes screwed up. I would be mentioning them and what should it looks like. Namely,</li></ul><ol class=""><li id="cc36" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw ka kb kc"><em class="kv">task.json</em></li></ol><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/9167dd28bffe1eef5900da42ab72f2ff" allowfullscreen="" frameborder="0" height="0" width="0" title="task.json" class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx">task.json</figcaption></figure><p id="ee90" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx"><em class="kv">2. launch.json</em></p><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/625e76c26a9c3fe42aef9074367ea1b8" allowfullscreen="" frameborder="0" height="0" width="0" title="launch.json" class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx"><em class="kw">launch.json</em></figcaption></figure><p id="746e" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx"><em class="kv">3. settings.json</em></p><figure class="ki kj kk kl km ej"><div class="et r em"><div class="kn r"><iframe src="https://towardsdatascience.com/media/3e7953254596a48831a80664973d0621" allowfullscreen="" frameborder="0" height="0" width="0" title="settings.json" class="ds t u eq ak" scrolling="auto"></iframe></div></div><figcaption class="ax fa fb fc fd dq do dp fe ff as cx"><em class="kw">settings.json</em></figcaption></figure><ul class=""><li id="117c" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw kt kb kc">Azure Functions has its limitation as compared to AWS lambda. When I started writing it, I thought it would be the same as AWS lambda as both are serverless, but implementing it was way hard for two reasons. First, Azure function does not allow online code editing, which is provided by AWS.</li></ul><h2 id="28d9" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Follow up:</h2><ul class=""><li id="132a" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw kt kb kc">If I were making this for a company and had enough resources, I would have gone with Azure function Dedicated App Plan, which has a maximum time limit of 30 mins.</li></ul></div></div></section><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><p id="3004" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Github: <a href="https://github.com/ksw25/Extract-Data-From-Tweeter-And-Save-In-Azure-SQL-Using-Azure-ServerLess" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">https://github.com/ksw25/Extract-Data-From-Tweeter-And-Save-In-Azure-SQL-Using-Azure-ServerLess</a></p></div></div></section><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><h2 id="804c" class="iz ja fm at as jb jc jd je jf jg jh ji jj jk jl jm">Acknowledgments :</h2><ul class=""><li id="1931" class="jn jo fm at jp b jq jr js jt ju jv jw jx jy jz iw kt kb kc">I did this as part of CS6513 Big Data Tools and Techniques at the Tandon School of Engineering, NYU</li><li id="07ee" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw kt kb kc">I acknowledge the IBM Power Systems Academic initiative for underwriting computing resources.</li><li id="b5f9" class="jn jo fm at jp b jq kd js ke ju kf jw kg jy kh iw kt kb kc">I acknowledge MSFT Azure for providing free Azure access to students.</li></ul></div></div></section><section class="dx dy dz ea eb"><div class="n p"><div class="ac ae af ag ah ec aj ak"><p id="f23e" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Regards,</p><p id="e334" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx"><em class="kv">Karanpreet Singh Wadhwa</em></p><p id="76d6" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx"><strong class="jp ku">Master’s</strong> in <strong class="jp ku">Computer Science</strong> | Class 2020</p><p id="a1d0" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Tandon School of Engineering | New York University</p><p id="6a25" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx">Graduate Teaching Assistant — Computer Vision | New York University</p><p id="a8d3" class="jn jo fm at jp b jq ko js kp ju kq jw kr jy ks iw dx"><a href="mailto:karan.wadhwa@nyu.edu" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">karan.wadhwa@nyu.edu</a>| (929) 287–9899 | <a href="https://www.linkedin.com/in/karanpreet-wadhwa-540388175/" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">LinkedIn</a> | <a href="https://github.com/ksw25" class="dc by fg fh fi fj" target="_blank" rel="noopener nofollow">Github</a></p></div></div></section>