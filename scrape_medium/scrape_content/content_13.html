<figure class="gl gm gn go gp gq dm dn paragraph-image"><div class="gr gs gt gu ak"><div class="dm dn gk"><div class="ha r gt hb"><div class="hc r"><div class="gv gw dq t u gx ak cc gy gz"><img class="dq t u gx ak hd he hf" src="https://miro.medium.com/max/60/0*Mh245eSDxm5CQchB?q=20" width="6000" height="4000" role="presentation"></div><img class="gv gw dq t u gx ak hg" width="6000" height="4000" role="presentation"><noscript><img class="dq t u gx ak" src="https://miro.medium.com/max/12000/0*Mh245eSDxm5CQchB" width="6000" height="4000" role="presentation"></noscript></div></div></div></div><figcaption class="ax fg hh hi hj do dm dn hk hl as cw">Photo by <a href="https://unsplash.com/@lucabravo?utm_source=medium&amp;utm_medium=referral" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">Luca Bravo</a> on <a href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">Unsplash</a></figcaption></figure><p id="ebcd" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">In this series, we will learn creating a web application from scratch, web scraping and storing the scraped data. All this while solving a real world problem.</p><p id="d26d" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">This is going to be a fun practical series divided into 3 part:</p><p id="1c9a" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">1. Scrape the data</p><p id="08a8" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">2. Store it</p><p id="a3d8" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">3. Create a web application</p><blockquote class="ie if ig"><p id="ac81" class="hq hr ed ih hs b ht hu hv hw hx hy hz ia ib ic id dv">Note: I am not sure if web scraping is illegal or not. It’s a complex topic to discuss. This series does not discuss the legal aspects of web scraping. However, I believe web scraping done ethically (debatable what is ethical) should not be a problem for the websites being scrapped.</p></blockquote><h1 id="8fda" class="ii ij ed at as ik ef il eh im in io ip iq ir is it"><strong class="bf">The problem we are going to solve</strong></h1><p id="6177" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">Assume that you are living in the USA and want to send some money to your friend or family in India. You would first google USD to INR rate, then you look for a money transfer service that allows you to send money from USD to INR. But, there are a lots of different services that provide different exchange rates, different service charges. First, you collect a list of such money transfer services and then you visit their websites to check what is the rate that they are providing. This takes a lot of time and effort.</p><p id="ce11" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">In this tutorial we are going solve this problem by creating a web-application that will show the exchange rates provided by these services at one place only. So that, you have to open only one website to decide which service to use.</p><p id="f566" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv"><strong class="hs iz">Lets solve the problem by breaking it into three parts:</strong></p><ol class=""><li id="5b98" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id ja jb jc">Collect data from various services</li><li id="7004" class="hq hr ed at hs b ht jd hv je hx jf hz jg ib jh id ja jb jc">Store the data</li><li id="f4cc" class="hq hr ed at hs b ht jd hv je hx jf hz jg ib jh id ja jb jc">Create web app using the data</li></ol><p id="53ca" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv"><strong class="hs iz">This article is going to cover the #1.</strong></p><p id="11b0" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">Sounds interesting?</p><p id="87f3" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">We have a lot to cover, so without wasting a moment, let’s get started.</p><h2 id="1c21" class="ji ij ed at as ik jj jk jl jm jn jo jp jq jr js jt">Requirements</h2><p id="94bc" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">1.<a href="https://www.python.org/downloads/" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow"> Python (web scraping)</a></p><p id="15c1" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">2. <a href="https://pypi.org/project/beautifulsoup4/" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">BeautifulSoup (Python library for webscraping)</a></p><p id="e597" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">3. <a href="https://docs.python.org/3/library/urllib.html" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">urllib.request (Python library for opening URLs)</a></p><p id="cc2f" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">In this part, we will cover the web scraping section.</p><h1 id="337c" class="ii ij ed at as ik ef il eh im in io ip iq ir is it"><strong class="bf">Basics</strong></h1><p id="475d" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">In a typical client server scenario, client (eg. web browsers) sends a request to server. Server responds with data. For eg. When we open google.com in any web browser, the browser sends the request to google’s server to get the google search page. The google server returns the data in HTML and then browser renders the HTML and display beautiful UI to the user. The same thing happens when we open any other website. Web-Scraping is to read the HTML and get the required data/information from that HTML.</p><p id="b6a9" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">Lets understand this while solving our problem at hand. Follow the below steps:</p><h2 id="0855" class="ji ij ed at as ik jj jk jl jm jn jo jp jq jr js jt">Step 1: Select the target</h2><p id="f6a1" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">As we are going to create an application where users can view the USD to INR exchange rate offered by various services that lets users send money from USA to India. The obvious requirement is the list of such services. We are going to use Remitly and Transferwise (randomly selected).</p><h2 id="a2f2" class="ji ij ed at as ik jj jk jl jm jn jo jp jq jr js jt">Step 2: Find the element to scrape in the website</h2><p id="1437" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">We learned in the basics that all websites are in HTML(Hyper Text Markup Language). Underlying HTML of the website opened in commonly used browsers (chrome, safari, edge, firefox) can be easily seen by right clicking on the page and selecting <em class="ih">Inspect</em> option.</p><p id="7d2d" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">We want to get the USD to INR, so open the first website (<a href="https://www.remitly.com/us/en/india/pricing" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">Remitly</a>), right click on the place where it shows INR rate that you would like to scrape. In the developer console that gets opened, right click on the selected element and copy -&gt; Copy Selector.</p><figure class="gl gm gn go gp gq"><div class="ha r gt"><div class="ju r"><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2F-UAubJFL--4%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3D-UAubJFL--4&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2F-UAubJFL--4%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="854" title="How to get an exact CSS path of element using Google Developer Tool" class="dq t u gx ak" scrolling="auto"></iframe></div></div></figure><p id="a555" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">The <strong class="hs iz">selector</strong> is copied to the clipboard, save it for now (!important), we will use it later. Similarly, open the second website (<a href="https://transferwise.com/us/currency-converter/usd-to-inr-rate" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">Tranferwise</a>) and do the same.</p><figure class="gl gm gn go gp gq"><div class="ha r gt"><div class="ju r"><iframe src="https://cdn.embedly.com/widgets/media.html?src=https%3A%2F%2Fwww.youtube.com%2Fembed%2FCOYVNSYJ-qs%3Ffeature%3Doembed&amp;url=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DCOYVNSYJ-qs&amp;image=https%3A%2F%2Fi.ytimg.com%2Fvi%2FCOYVNSYJ-qs%2Fhqdefault.jpg&amp;key=a19fcc184b9711e1b4764040d3dc5c07&amp;type=text%2Fhtml&amp;schema=youtube" allowfullscreen="" frameborder="0" height="480" width="854" title="How to get the exact CSS path of an element using chrome developer tool." class="dq t u gx ak" scrolling="auto"></iframe></div></div></figure><p id="5e1e" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">Now we have the selectors (which is the CSS path to the element that displays the INR rate in the DOM). We will write Python script to <a href="https://go.skimresources.com/?id=126542X1588076&amp;xs=1&amp;url=https://en.wiktionary.org/wiki/programmatically" class="da by hm hn ho hp" target="_blank" rel="noopener nofollow">programmatically</a> make request (using urllib) to Remitly and Tranferwise web pages and read the HTML response (using BeautifulSoup library) and extract the INR rate using the selectors (obtained in previous step).</p><figure class="gl gm gn go gp gq"><div class="ha r gt"><div class="jv r"><iframe src="https://medium.com/media/9423f729bd7c4c5cb6909f1b380a60ed" allowfullscreen="" frameborder="0" height="0" width="0" title="Pyhon script to scrape USD to INR rate from remitly and tranferwise" class="dq t u gx ak" scrolling="auto"></iframe></div></div></figure><p id="85fa" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">The above script contains all the comments to explain what each line is doing. If it needs more explanation, let me know in comments section :). In short, the above script is performing the below steps:</p><p id="68fe" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">1. Call the page(url) that shows the exchange rate from USD to INR.</p><p id="cbef" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">2. Get the HTML.</p><p id="1ad2" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">3. Create a BeautifulSoup object to navigate the html easily.</p><p id="7e2e" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">4. Extract the rate using the selectors we got in step2.</p><h1 id="eded" class="ii ij ed at as ik ef il eh im in io ip iq ir is it">Execute</h1><p id="59b4" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">Copy the above script in a file and save it with <strong class="hs iz">.py</strong> extension (e.g. scrapper.py).</p><p id="0ca1" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">Run the script by executing below command in terminal/cmd (python3 should be installed already)</p><pre class="gl gm gn go gp jw jx cl"><span id="8ebc" class="ji ij ed at jy b fg jz ka r kb">CopyCopyCopypython scrapper.py </span></pre><p id="8788" class="hq hr ed at hs b ht hu hv hw hx hy hz ia ib ic id dv">Now, we have the nice script that scrapes the exchange rate from two money exchange services (Remitly &amp; Transferwise). This script can be easily extended to include more services without much changes in the code. Simply create new class for a new service and include the name of the service in the MONEY_TRANSER_SERVICES array. That’s it.</p><h1 id="ed9a" class="ii ij ed at as ik ef il eh im in io ip iq ir is it">Conclusion</h1><p id="824e" class="hq hr ed at hs b ht iu hv iv hx iw hz ix ib iy id dv">In this part, we saw how to extract the information from a web-page. In the next part we will see how to structure the data and store in MongoDB for long term storage. Stay tuned!</p>