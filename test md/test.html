<div>
    <div class="ds u dt du dv dw"></div>
    <section class="dx dy dz ea eb">
        <div class="ec">
            <div class="n p">
                <div class="ed ee ef eg eh ei ag ej ah ek aj ak">
                    <figure class="em en eo ep eq ec er es paragraph-image">
                        <div class="et eu ev ew ak">
                            <div class="do dp el">
                                <div class="fc r ev fd">
                                    <div class="fe r">
                                        <div class="ex ey ds t u ez ak cd fa fb"><img class="ds t u ez ak ff fg fh"
                                                src="https://miro.medium.com/max/60/1*OVSQPzUI8Kcj35d_Fk1lZg.jpeg?q=20"
                                                width="3000" height="2000" role="presentation"></div><img
                                            class="ex ey ds t u ez ak fi" width="3000" height="2000"
                                            role="presentation"><noscript><img class="ds t u ez ak"
                                                src="https://miro.medium.com/max/6000/1*OVSQPzUI8Kcj35d_Fk1lZg.jpeg"
                                                width="3000" height="2000" role="presentation">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </figure>
                </div>
            </div>
        </div>
        <div class="n p">
            <div class="ac ae af ag ah fj aj ak">
                <div>
                    <div id="f8e0" class="fk fl fm at fn b fo fp fq fr fs ft fu fv fw fx fy">
                        <h1 class="fn b fo fz fq ga fs gb fu gc fw gd fm">How do we find daily good deals online,
                            automatically?</h1>
                    </div>
                </div>
                <div id="294d" class="ge fl ax at as cx gf gg gh gi gj gk gl gm gn go gp">
                    <h2 class="as cx gf gq gh gr gj gs gl gt gn gu ax">Basic web content scraping with R to automate
                        boring tasks</h2>
                </div>
                <div class="gv">
                    <div class="n gw gx gy gz">
                        <div class="o n">
                            <div><a href="/@jameschen_78678?source=post_page-----fe8cfc8f783a----------------------"
                                    rel="noopener"><img alt="James Chen" class="r ha hb hc"
                                        src="https://miro.medium.com/fit/c/96/96/1*SzPGtdaPS0Zh41UrcrDiyA.jpeg"
                                        width="48" height="48"></a></div>
                            <div class="hd ak r">
                                <div class="n">
                                    <div style="flex:1"><span class="as b at au av aw r fm q">
                                            <div class="he n o hf"><span class="as cx hg au cd hh hi hj hk hl fm"><a
                                                        href="/@jameschen_78678?source=post_page-----fe8cfc8f783a----------------------"
                                                        class="dc dd bb bc bd be bf bg bh bi hm bl bm hn ho"
                                                        rel="noopener">James Chen</a></span>
                                                <div class="hp r ap h"><a
                                                        href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-do-we-find-daily-good-deals-online-automatically-fe8cfc8f783a&amp;source=-c16867ccea73-------------------------follow_byline-"
                                                        class="hq fm q bq hr hs ht hu bi hn hv hw hx hy hz ia bt as b at ib cy aw bu bv bw bx by bl"
                                                        rel="noopener">Follow</a></div>
                                            </div>
                                        </span></div>
                                </div><span class="as b at au av aw r ax ay"><span
                                        class="as cx hg au cd hh hi hj hk hl ax">
                                        <div><a class="dc dd bb bc bd be bf bg bh bi hm bl bm hn ho" rel="noopener"
                                                href="/how-do-we-find-daily-good-deals-online-automatically-fe8cfc8f783a?source=post_page-----fe8cfc8f783a----------------------">Jan
                                                7, 2017</a> <!-- -->·
                                            <!-- -->
                                            <!-- -->5
                                            <!-- --> min read</div>
                                    </span></span>
                            </div>
                        </div>
                        <div class="n ic id ie if ig ih ii ij ab">
                            <div class="n o">
                                <div class="ik r ap"><a
                                        href="//medium.com/p/fe8cfc8f783a/share/twitter?source=post_actions_header---------------------------"
                                        class="dc dd bb bc bd be bf bg bh bi il im bl bm hn ho" target="_blank"
                                        rel="noopener nofollow"><svg width="29" height="29" class="q">
                                            <path
                                                d="M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z">
                                            </path>
                                        </svg></a></div>
                                <div class="ik r ap"><a
                                        href="//medium.com/p/fe8cfc8f783a/share/facebook?source=post_actions_header---------------------------"
                                        class="dc dd bb bc bd be bf bg bh bi il im bl bm hn ho" target="_blank"
                                        rel="noopener nofollow"><svg width="29" height="29" class="q">
                                            <path
                                                d="M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79">
                                            </path>
                                        </svg></a></div>
                                <div class="in r ao"><a
                                        href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Ftowardsdatascience.com%2Fhow-do-we-find-daily-good-deals-online-automatically-fe8cfc8f783a&amp;source=post_actions_header--------------------------bookmark_sidebar-"
                                        class="dc dd bb bc bd be bf bg bh bi il im bl bm hn ho" rel="noopener"><svg
                                            width="25" height="25" viewbox="0 0 25 25">
                                            <path
                                                d="M19 6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14.66h.01c.01.1.05.2.12.28a.5.5 0 0 0 .7.03l5.67-4.12 5.66 4.13a.5.5 0 0 0 .71-.03.5.5 0 0 0 .12-.29H19V6zm-6.84 9.97L7 19.64V6a1 1 0 0 1 1-1h9a1 1 0 0 1 1 1v13.64l-5.16-3.67a.49.49 0 0 0-.68 0z"
                                                fill-rule="evenodd"></path>
                                        </svg></a></div>
                            </div>
                        </div>
                    </div>
                </div>
                <blockquote class="io ip iq">
                    <p id="2370" class="ir is fm it iu b gf iv gh iw ix iy iz ja jb jc jd dx">Background</p>
                </blockquote>
                <p id="1cd9" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">As defined <a
                        href="https://discuss.analyticsvidhya.com/t/what-are-different-paths-in-data-sciences/302"
                        class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">here</a>, “a data scientist is
                    someone who is better at statistics than any software engineer and better at software engineering
                    than any statistician.” Therefore, this blog post focuses on the practice of web content scrapping,
                    which is an essential skill for data scientists to acquire information outside of structured
                    databases, and when APIs are unavailable.</p>
                <p id="8148" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">When looking for good deals
                    online, we often go on to a few eCommerce websites frequently to check the prices on the items we
                    want. After a while, this becomes a tedious task. Inspired by <a
                        href="https://hackernoon.com/the-programmers-guide-to-booking-a-plane-11e37d610045#.z50j983vh"
                        class="dc by je jf jg jh" target="_blank" rel="noopener nofollow"><em class="it">The
                            Programmer’s Guide to Booking a Plane</em></a>, in which Zeke wrote a script in Node to
                    automate the process of finding cheap plane tickets, we would like to replicate his method on good
                    MacBook deals, using a few packages in R.</p>
                <blockquote class="io ip iq">
                    <p id="00d9" class="ir is fm it iu b gf iv gh iw ix iy iz ja jb jc jd dx">Objective</p>
                </blockquote>
                <p id="5b41" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">The objective is to receive
                    automatic email alerts when the MacBook price drops to below a certain point.</p>
                <blockquote class="io ip iq">
                    <p id="e752" class="ir is fm it iu b gf iv gh iw ix iy iz ja jb jc jd dx">Approach</p>
                </blockquote>
                <ol class="">
                    <li id="0514" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd ji jj jk"><strong
                            class="iu jl">Scrap the product information from the eCommerce website</strong></li>
                </ol>
                <p id="72e0" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">We need to load the html
                    structure of the website first, in order to retrieve the information we need. The R package we will
                    be using is <em class="it">rvest</em>.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="e7cc" class="jt ju fm at jv b hg jw jx r jy">library(rvest)<br>library(XML)</span><span id="97e2" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">#save html of URL<br>url &lt;- "<a href="http://www.rakuten.com.tw/category/4945/?p=1&amp;l-id=tw_pagen_1" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">http://www.rakuten.com.tw/category/4945/?p=1&amp;l-id=tw_pagen_1</a>"</span></pre>
                <p id="be55" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">After saving the URL html, we
                    need to find the section of information that we need, by inspecting the page source. We will search
                    a price to navigate to product related information, as shown below.</p>
            </div>
        </div>
        <div class="ec">
            <div class="n p">
                <div class="ed ee ef eg eh ei ag ej ah ek aj ak">
                    <figure class="jm jn jo jp jq ec er es paragraph-image">
                        <div class="et eu ev ew ak">
                            <div class="do dp ke">
                                <div class="fc r ev fd">
                                    <div class="kf r">
                                        <div class="ex ey ds t u ez ak cd fa fb"><img class="ds t u ez ak ff fg fh"
                                                src="https://miro.medium.com/max/60/1*Sff7wJgMYMqTyk0qJ_ap4g.png?q=20"
                                                width="1440" height="809" role="presentation"></div><img
                                            class="ex ey ds t u ez ak fi" width="1440" height="809"
                                            role="presentation"><noscript><img class="ds t u ez ak"
                                                src="https://miro.medium.com/max/2880/1*Sff7wJgMYMqTyk0qJ_ap4g.png"
                                                width="1440" height="809" role="presentation"></noscript>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <figcaption class="ax hg kg kh ki dq do dp kj kk as cx">Screenshot of the page source
                        </figcaption>
                    </figure>
                </div>
            </div>
        </div>
        <div class="n p">
            <div class="ac ae af ag ah fj aj ak">
                <p id="af70" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">We noticed that product
                    related information is under <br><strong class="iu jl">&lt;div class=”b-content”&gt;</strong><br>and
                    therefore we will extract this part only.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="82ee" class="jt ju fm at jv b hg jw jx r jy">product &lt;- url %&gt;%<br>  read_html() %&gt;%<br>  html_nodes(".b-content")</span></pre>
                <p id="8afc" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">An excellent Chrome add on
                    called <strong class="iu jl">SelectorGadget</strong> can be downloaded <a
                        href="https://chrome.google.com/webstore/detail/selectorgadget/mhjhnkcfbdhnjickkkdbjoemdmbfginb?hl=en"
                        class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">here</a>. This tool allows us
                    to intuitively select the specific content we want.</p>
                <p id="4218" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">When we select the name of the
                    product, the content will be highlighted in green, as shown below. The tool also guesses that we
                    also want other product names as well, and therefore it will highlight other product names in
                    yellow. For any content that we do not need, we can click on it and it will be removed (the color
                    will turn red).</p>
            </div>
        </div>
        <div class="ec">
            <div class="n p">
                <div class="ed ee ef eg eh ei ag ej ah ek aj ak">
                    <figure class="jm jn jo jp jq ec er es paragraph-image">
                        <div class="et eu ev ew ak">
                            <div class="do dp ke">
                                <div class="fc r ev fd">
                                    <div class="kl r">
                                        <div class="ex ey ds t u ez ak cd fa fb"><img class="ds t u ez ak ff fg fh"
                                                src="https://miro.medium.com/max/60/1*13P2YG4PHIvNPxxxNDIYww.png?q=20"
                                                width="1440" height="816" role="presentation"></div><img
                                            class="ex ey ds t u ez ak fi" width="1440" height="816"
                                            role="presentation"><noscript><img class="ds t u ez ak"
                                                src="https://miro.medium.com/max/2880/1*13P2YG4PHIvNPxxxNDIYww.png"
                                                width="1440" height="816" role="presentation"></noscript>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </figure>
                </div>
            </div>
        </div>
        <div class="n p">
            <div class="ac ae af ag ah fj aj ak">
                <p id="3882" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">We found that product name can
                    be extracted using <strong class="iu jl">.product-name</strong>, as shown on the bottom of the page.
                </p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="7a6d" class="jt ju fm at jv b hg jw jx r jy">name &lt;- product %&gt;%<br>  html_nodes(".product-name") %&gt;%<br>  html_text()</span></pre>
                <p id="8864" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">Next we will repeat the
                    process to find price and save it in numeric format.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="e910" class="jt ju fm at jv b hg jw jx r jy">price &lt;- product %&gt;%<br>  html_nodes(".b-underline .b-text-prime") %&gt;%<br>  html_text() %&gt;%<br>  gsub(",","",.) %&gt;%<br>  as.numeric()</span></pre>
                <p id="8114" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">After we are done, we can save
                    name and price in a dataframe.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="2a2d" class="jt ju fm at jv b hg jw jx r jy">all &lt;- data.frame(name, price,stringsAsFactors = FALSE)</span></pre>
                <p id="3eb2" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">We will also need to scrap
                    multiple pages to extract all the information.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="8cd1" class="jt ju fm at jv b hg jw jx r jy">for (i in 1:10){<br>starturl &lt;- "<a href="http://www.rakuten.com.tw/category/4945/?p=" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">http://www.rakuten.com.tw/category/4945/?p=</a>"<br>nexturl &lt;- "&amp;l-id=tw_pagen_"<br>url &lt;- paste(starturl,i,nexturl,i,sep="")</span><span id="3e8c" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">product &lt;- url %&gt;%<br>  read_html() %&gt;%<br>  html_nodes(".b-content")</span><span id="55f1" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">name &lt;- product %&gt;%<br>  html_nodes(".product-name") %&gt;%<br>  html_text()</span><span id="e52c" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">price &lt;- product %&gt;%<br>  html_nodes(".b-underline .b-text-prime") %&gt;%<br>  html_text() %&gt;%<br>  gsub(",","",.) %&gt;%<br>  as.numeric()</span><span id="75a2" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">mydata &lt;- data.frame(name, price,stringsAsFactors = FALSE)<br>all &lt;- rbind(all,mydata)<br>}</span><span id="b9a8" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">all&lt;-all[!duplicated(all),]</span></pre>
                <p id="eee5" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">The final result is stored
                    below in dataframe format.</p>
                <figure class="jm jn jo jp jq ec do dp paragraph-image">
                    <div class="do dp km">
                        <div class="fc r ev fd">
                            <div class="kn r">
                                <div class="ex ey ds t u ez ak cd fa fb"><img class="ds t u ez ak ff fg fh"
                                        src="https://miro.medium.com/max/38/1*CSA61earMGgZjM_u8CSBZA.png?q=20"
                                        width="423" height="672" role="presentation"></div><img
                                    class="ex ey ds t u ez ak fi" width="423" height="672"
                                    role="presentation"><noscript><img class="ds t u ez ak"
                                        src="https://miro.medium.com/max/846/1*CSA61earMGgZjM_u8CSBZA.png" width="423"
                                        height="672" role="presentation"></noscript>
                            </div>
                        </div>
                    </div>
                    <figcaption class="ax hg kg kh ki dq do dp kj kk as cx">Screenshot of the scrapped prices on
                        MacBooks</figcaption>
                </figure>
                <p id="e435" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx"><strong class="iu jl">2.
                        Create rules to send out email alerts</strong></p>
                <p id="2504" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">Next, we will set up the rules
                    to receive email alerts. Say we only wish to receive alerts on products with price between NT$25,000
                    and NT$30,000.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="6db8" class="jt ju fm at jv b hg jw jx r jy">alert &lt;- all[all$price&gt;25000&amp;all$price&lt;=30000,]</span></pre>
                <p id="a168" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">Next we will use the<em
                        class="it"> mailR</em> package to send out the email, if there is at least one alert, as shown
                    below.</p>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="93b1" class="jt ju fm at jv b hg jw jx r jy">if (nrow(alert) &gt;=1){</span><span id="53f8" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">write.table(alert,"alert.txt",fileEncoding = "UTF-8")</span><span id="d635" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">send.mail(from = "<a href="mailto:jchen6912@gmail.com" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">jchen6912@gmail.com</a>",<br>          to = c("<a href="mailto:jchen6912@gmail.com" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">jchen6912@gmail.com</a>"),<br>          subject = "Mac Deal Alert",<br>          body &lt;- "alert.txt",<br>          smtp = list(host.name = "smtp.gmail.com", port = 465, user.name = "<a href="mailto:jchen6912@gmail.com" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">jchen6912@gmail.com</a>", passwd = "xxxxxxxx", ssl = TRUE),<br>          encoding = "utf-8",<br>          authenticate = TRUE,<br>          send = TRUE)<br>}</span></pre>
                <figure class="jm jn jo jp jq ec do dp paragraph-image">
                    <div class="do dp ko">
                        <div class="fc r ev fd">
                            <div class="kp r">
                                <div class="ex ey ds t u ez ak cd fa fb"><img class="ds t u ez ak ff fg fh"
                                        src="https://miro.medium.com/max/34/1*If07soGQ43YmQ_fGIGdJXA.png?q=20"
                                        width="320" height="568" role="presentation"></div><img
                                    class="ex ey ds t u ez ak fi" width="320" height="568"
                                    role="presentation"><noscript><img class="ds t u ez ak"
                                        src="https://miro.medium.com/max/640/1*If07soGQ43YmQ_fGIGdJXA.png" width="320"
                                        height="568" role="presentation"></noscript>
                            </div>
                        </div>
                    </div>
                    <figcaption class="ax hg kg kh ki dq do dp kj kk as cx">Screenshot of the automatic email alert
                        received</figcaption>
                </figure>
                <p id="8ff4" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx"><strong class="iu jl">3.
                        Automate the process by scheduling the task regularly</strong></p>
                <p id="91cf" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">This can be done with the <em
                        class="it">taskscheduleR</em> package, but currently only available in Windows. Click <a
                        href="https://github.com/bnosac/taskscheduleR" class="dc by je jf jg jh" target="_blank"
                        rel="noopener nofollow">here</a> for more details. We can schedule the Rscript to run at desired
                    frequency and receive automatic alerts accordingly.</p>
                <figure class="jm jn jo jp jq ec do dp paragraph-image">
                    <div class="et eu ev ew ak">
                        <div class="do dp kq">
                            <div class="fc r ev fd">
                                <div class="kr r">
                                    <div class="ex ey ds t u ez ak cd fa fb"><img class="ds t u ez ak ff fg fh"
                                            src="https://miro.medium.com/max/60/1*yTD4zDA4GY1BLLXrVi1ZWg.png?q=20"
                                            width="771" height="761" role="presentation"></div><img
                                        class="ex ey ds t u ez ak fi" width="771" height="761"
                                        role="presentation"><noscript><img class="ds t u ez ak"
                                            src="https://miro.medium.com/max/1542/1*yTD4zDA4GY1BLLXrVi1ZWg.png"
                                            width="771" height="761" role="presentation"></noscript>
                                </div>
                            </div>
                        </div>
                    </div>
                    <figcaption class="ax hg kg kh ki dq do dp kj kk as cx">Screenshot of the UI in taskscheduleR
                    </figcaption>
                </figure>
                <p id="7885" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd dx">This sums up the short blog on
                    how to scrap content for websites with static content, however, dynamic websites are more
                    complicated and may require additional code to simulate real browsing behaviors, such as member
                    login and form submits. Alternatively, similar task can also be performed in Python with <em
                        class="it">scrapy</em> and <em class="it">BeautifulSoup</em>.</p>
                <blockquote class="io ip iq">
                    <p id="dd0f" class="ir is fm it iu b gf iv gh iw ix iy iz ja jb jc jd dx">R Code</p>
                </blockquote>
                <pre
                    class="jm jn jo jp jq jr js cm"><span id="1dbf" class="jt ju fm at jv b hg jw jx r jy">library(rvest)<br>library(XML)<br>library(taskscheduleR)<br>library(mailR)</span><span id="7884" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">setwd("~/Desktop/deals")</span><span id="aab7" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">url &lt;- "<a href="http://www.rakuten.com.tw/category/4945/?p=1&amp;l-id=tw_pagen_1" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">http://www.rakuten.com.tw/category/4945/?p=1&amp;l-id=tw_pagen_1</a>"<br>product &lt;- url %&gt;%<br>  read_html() %&gt;%<br>  html_nodes(".b-content")</span><span id="5107" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">name &lt;- product %&gt;%<br>  html_nodes(".product-name") %&gt;%<br>  html_text()</span><span id="c78b" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">price &lt;- product %&gt;%<br>  html_nodes(".b-underline .b-text-prime") %&gt;%<br>  html_text() %&gt;%<br>  gsub(",","",.) %&gt;%<br>  as.numeric()</span><span id="4e31" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">all &lt;- data.frame(name, price,stringsAsFactors = FALSE)</span><span id="eac7" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">for (i in 1:10){<br>starturl &lt;- "<a href="http://www.rakuten.com.tw/category/4945/?p=" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">http://www.rakuten.com.tw/category/4945/?p=</a>"<br>nexturl &lt;- "&amp;l-id=tw_pagen_"<br>url &lt;- paste(starturl,i,nexturl,i,sep="")</span><span id="827e" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">product &lt;- url %&gt;%<br>  read_html() %&gt;%<br>  html_nodes(".b-content")</span><span id="74c8" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">name &lt;- product %&gt;%<br>  html_nodes(".product-name") %&gt;%<br>  html_text()</span><span id="c448" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">price &lt;- product %&gt;%<br>  html_nodes(".b-underline .b-text-prime") %&gt;%<br>  html_text() %&gt;%<br>  gsub(",","",.) %&gt;%<br>  as.numeric()</span><span id="9897" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">mydata &lt;- data.frame(name, price,stringsAsFactors = FALSE)<br>all &lt;- rbind(all,mydata)<br>}</span><span id="ae6f" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">all&lt;-all[!duplicated(all),]</span><span id="dc2f" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">alert &lt;- all[all$price&gt;25000&amp;all$price&lt;=30000,]</span><span id="f887" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">if (nrow(alert) &gt;=1){</span><span id="8948" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">write.table(alert,"alert.txt",fileEncoding = "UTF-8")</span><span id="87c4" class="jt ju fm at jv b hg jz ka kb kc kd jx r jy">send.mail(from = "<a href="mailto:jchen6912@gmail.com" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">jchen6912@gmail.com</a>",<br>          to = c("<a href="mailto:jchen6912@gmail.com" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">jchen6912@gmail.com</a>"),<br>          subject = "Mac Deal Alert",<br>          body &lt;- "alert.txt",<br>          smtp = list(host.name = "smtp.gmail.com", port = 465, user.name = "<a href="mailto:jchen6912@gmail.com" class="dc by je jf jg jh" target="_blank" rel="noopener nofollow">jchen6912@gmail.com</a>", passwd = "xxxxxxxx", ssl = TRUE),<br>          encoding = "utf-8",<br>          authenticate = TRUE,<br>          send = TRUE)<br>}</span></pre>
            </div>
        </div>
    </section>
    <hr class="ks cx kt ku kv ki kw kx ky kz la">
    <section class="dx dy dz ea eb">
        <div class="n p">
            <div class="ac ae af ag ah fj aj ak">
                <p id="2f5e" class="ir is fm at iu b gf iv gh iw ix iy iz ja jb jc jd lb dx"><span
                        class="r lc ld le lf lg lh li lj lk ev">Q</span>uestions, comments, or
                    concerns?<br>jchen6912@gmail.com</p>
            </div>
        </div>
    </section>
</div>